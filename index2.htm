<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار شامل: ملامح منهج الإثبات في القرآن والسنة</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --success-bg: #d4edda;
            --success-text: #155724;
            --warning-bg: #fff3cd; /* أصفر للإجابة الخاطئة كما طلب */
            --warning-text: #856404;
            --white: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f7;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .quiz-container {
            background-color: var(--white);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 900px;
            padding: 30px;
            position: relative;
        }

        header {
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            font-size: 24px;
            margin: 0;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            color: #666;
            font-size: 14px;
        }

        .progress-container {
            width: 100%;
            background-color: #eee;
            border-radius: 10px;
            height: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-area {
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .question-meta {
            font-size: 12px;
            color: #888;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .option-btn {
            background-color: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px 20px;
            font-size: 16px;
            cursor: pointer;
            text-align: right;
            transition: all 0.2s;
            color: #333;
            font-family: inherit;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--accent-color);
            background-color: #f8fbff;
        }

        .option-btn:disabled {
            cursor: default;
        }

        /* تنسيق الإجابات */
        .option-btn.correct {
            background-color: var(--success-bg) !important;
            border-color: var(--success-text) !important;
            color: var(--success-text) !important;
            font-weight: bold;
        }

        .option-btn.wrong {
            background-color: var(--warning-bg) !important;
            border-color: var(--warning-text) !important;
            color: var(--warning-text) !important;
        }

        .feedback-section {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            display: none;
            animation: fadeIn 0.3s ease;
            border-right: 5px solid;
        }

        .feedback-section.success {
            background-color: var(--success-bg);
            border-right-color: var(--success-text);
            color: var(--success-text);
        }

        .feedback-section.error {
            background-color: #fff3cd;
            border-right-color: #856404;
            color: #856404;
        }

        .explanation-text {
            margin-top: 10px;
            line-height: 1.6;
        }

        .citation {
            display: block;
            margin-top: 8px;
            font-size: 0.85em;
            opacity: 0.8;
            font-style: italic;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }

        .nav-btn {
            padding: 10px 30px;
            border: none;
            border-radius: 6px;
            background-color: var(--primary-color);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .nav-btn:hover:not(:disabled) {
            background-color: var(--secondary-color);
        }

        .nav-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

<div class="quiz-container">
    <header>
        <h1>مسابقة منهج الإثبات في القرآن والسنة</h1>
        <div class="stats-bar">
            <span>السؤال: <span id="q-number">1</span> / 100</span>
            <span>المستوى: <span id="q-level">متوسط</span></span>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </header>

    <div class="question-area" id="question-area">
        <!-- سيتم إدراج السؤال هنا بواسطة الجافاسكربت -->
    </div>

    <div class="feedback-section" id="feedback-area">
        <h3 id="feedback-title" style="margin: 0 0 10px 0;"></h3>
        <div id="feedback-content" class="explanation-text"></div>
    </div>

    <div class="controls">
        <button class="nav-btn" id="prev-btn" onclick="prevQuestion()" disabled>السابق ⬅</button>
        <button class="nav-btn" id="next-btn" onclick="nextQuestion()" disabled>التالي ➡</button>
    </div>
</div>

<script>
    // قاعدة بيانات الأسئلة - 100 سؤال مستقاة بدقة من النص
    const quizData = [
        // --- القسم الأول: القرآن الكريم ومنهج الإثبات (سطحي/ضمني) ---
        {
            type: "MCQ",
            level: "سطحي",
            question: "في سورة النحل، وصف الله تعالى الكذب بأنه صفة ملازمة لـ:",
            options: ["المنافقين فقط", "الذين لا يؤمنون بآيات الله", "اليهود", "العصاة من المسلمين"],
            correct: 1,
            explanation: "قال تعالى: (إِنَّمَا يَفۡتَرِي ٱلۡكَذِبَ ٱلَّذِينَ لَا يُؤۡمِنُونَ بِـَٔايَٰتِ ٱللَّهِ).",
            citation: "المصدر: الفقرة [1]"
        },
        {
            type: "TF",
            level: "ضمني",
            question: "نفي الإيمان عن الكاذب في سورة النحل يقتصر فقط على الكذب في العقيدة ولا يشمل الرواية.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، الآية تشكل الضابط الأول في الرواية، فهي تنفي عن المسلم الصادق أن يتصف بالكذب، مما يجعله قبيحاً في الرواية.",
            citation: "المصدر: الفقرة [2]"
        },
        {
            type: "MCQ",
            level: "متوسط",
            question: "ما هو المبدأ الذي أرسَته آية (يَٰٓأَيُّهَا ٱلَّذِينَ ءَامَنُوٓاْ إِن جَآءَكُمۡ ‌فَاسِقُۢ بِنَبَإٖ فَتَبَيَّنُوٓاْ)؟",
            options: ["رفض خبر الفاسق مطلقاً", "قبول خبر الفاسق مع الحذر", "التوقف في الخبر حتى التبيّن والنظر في حال الراوي", "تحريم نقل الأخبار"],
            correct: 2,
            explanation: "الآية تأمر بالتبين قبل قبول الخبر، وتؤسس لمنهج النظر في صفة المُخبر (هل هو فاسق أم عدل).",
            citation: "المصدر: الفقرة [3]"
        },
        {
            type: "TF",
            level: "سطحي",
            question: "استنبط العلماء اشتراط العدالة في الرواية قياساً على اشتراط العدالة في الشهادة في سورة الطلاق.",
            options: ["صح", "خطأ"],
            correct: 0,
            explanation: "صحيح، قال العلماء إذا اشترطت العدالة في الأموال (وَأَشۡهِدُواْ ‌ذَوَيۡ ‌عَدۡلٖ مِّنكُمۡ)، فالدين أولى.",
            citation: "المصدر: الفقرة [4]"
        },
        {
            type: "MCQ",
            level: "استنتاجي",
            question: "لماذا اعتبر النص أن الكذب في الحياة اليومية مؤشر خطير في علم الحديث؟",
            options: ["لأنه يسقط المروءة الاجتماعية", "لأن من يكذب في حديث الناس لا يُؤمن أن يكذب على رسول الله ﷺ", "لأنه يوجب الحد الشرعي", "لأنه مكروه فقط"],
            correct: 1,
            explanation: "النص ذكر: 'لأن من يكذب في حياته اليومية لا يُؤمَن عليه أن يكذب على أحاديث رسول الله'.",
            citation: "المصدر: الفقرة [5]"
        },

        // --- القسم الثاني: السنة النبوية والتحذير من الكذب (متوسط/نقدي) ---
        {
            type: "MCQ",
            level: "سطحي",
            question: "حديث (من كذب علي متعمداً...) يعتبر حديثاً:",
            options: ["آحاد", "غريب", "متواتر", "ضعيف"],
            correct: 2,
            explanation: "النص ذكر أنه أصح حديث وبلغ مبلغ التواتر، رواه ما يزيد عن سبعين صحابياً.",
            citation: "المصدر: الفقرة [6]"
        },
        {
            type: "TF",
            level: "نقد",
            question: "غياب كلمة 'متعمداً' في الرواية الأخرى لحديث الكذب يخفف من وطأة الحديث.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، بل يجعل النص أخطر، حيث يدخل فيه من نسب شيئاً للنبي ﷺ وهو مخطئ بلا قصد.",
            citation: "المصدر: الفقرة [7]"
        },
        {
            type: "MCQ",
            level: "لغوي/فهم",
            question: "ما معنى (فليتبوأ مقعده من النار) كما ورد في التفسير؟",
            options: ["فليحذر من النار", "فليتخذ مكاناً ثابتاً ومستقراً فيها", "فليدعوا الله للنجاة", "فليستغفر"],
            correct: 1,
            explanation: "المعنى: فلينزل وليحل، وكأنه حجز مقعداً ثابتاً في النار لا محالة.",
            citation: "المصدر: الفقرة [8]"
        },
        {
            type: "MCQ",
            level: "دقيق",
            question: "في حديث (من حدث عني بحديث يرى أنه كذب فهو أحد الكاذبين)، ضبط (الكاذبَيْن) بالتثنية يشير إلى:",
            options: ["المنافق والكافر", "منشئ الكذب (المخترع) وناقله", "الكاتب والقارئ", "المستمع والمتكلم"],
            correct: 1,
            explanation: "الكاذب الأول هو من اخترع الحديث، والثاني هو من نقله مع علمه بوضعه.",
            citation: "المصدر: الفقرة [9]"
        },
        {
            type: "TF",
            level: "سطحي",
            question: "معنى (نضَّر الله امرأً) في الحديث هو الدعاء له بكثرة المال والرزق.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، المعنى هو الوجه النضير والمشرق والمنور (الجمال والبهاء).",
            citation: "المصدر: الفقرة [10]"
        },
        {
            type: "MCQ",
            level: "فهم",
            question: "عبارة (فرب مبلغ أوعى من سامع) تشير إلى أهمية:",
            options: ["الكتابة", "الاستنباط والفقه بجانب الحفظ", "السفر للرحلة", "علو الإسناد"],
            correct: 1,
            explanation: "قد ينقل الراوي الحديث ولا يفهمه جيداً، فيأتي فقيه يستنبط منه أحكاماً لم يدركها الناقل.",
            citation: "المصدر: الفقرة [11]"
        },

        // --- القسم الثالث: خصوصيات الصحابة (بيئة/حفظ) ---
        {
            type: "MCQ",
            level: "استنتاجي",
            question: "ما العامل البيئي الذي ساهم في صفاء أذهان الصحابة وقوة حفظهم؟",
            options: ["التجارة الدولية", "بساطة الحياة وخلوها من التعقيدات والتكنولوجيا", "كثرة المدارس", "النظام الغذائي المعقد"],
            correct: 1,
            explanation: "حياتهم كانت بسيطة خالية من التكلف والتشويشات الذهنية، مما عزز قوة القرائح.",
            citation: "المصدر: الفقرة [12, 13]"
        },
        {
            type: "TF",
            level: "سطحي",
            question: "كان الصحابة يميزون بين القرآن والسنة في وجوب الامتثال، فيطيعون القرآن أكثر.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، أدركوا أن السنة مصدر تشريعي كالقرآن، فكانوا يطيعون دون سؤال: هل هذا من عندك أم من عند الله.",
            citation: "المصدر: الفقرة [14]"
        },
        {
            type: "MCQ",
            level: "فهم",
            question: "كيف كان أسلوب النبي ﷺ يساعد على الحفظ؟",
            options: ["يتكلم بسرعة", "يكرر الكلام ثلاثاً وكلامه معدود", "يستخدم الشعر", "يكتب كل شيء"],
            correct: 1,
            explanation: "كان يتكلم بكلمات لو عدها العاد لأحصاها، ويعيد الكلام ليُحفظ.",
            citation: "المصدر: الفقرة [14]"
        },
        {
            type: "MCQ",
            level: "حفظ",
            question: "الصحابي الذي دعا له النبي ﷺ بقوله (ابسط رداءك) فما نسي حديثاً بعده هو:",
            options: ["عبد الله بن عباس", "أبو هريرة", "أنس بن مالك", "علي بن أبي طالب"],
            correct: 1,
            explanation: "أبو هريرة رضي الله عنه هو صاحب قصة بسط الرداء.",
            citation: "المصدر: الفقرة [15]"
        },
        {
            type: "TF",
            level: "تاريخي",
            question: "الصحيفة الصادقة هي صحيفة كتبها علي بن أبي طالب رضي الله عنه.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، الصحيفة الصادقة كانت مع عبد الله بن عمرو بن العاص.",
            citation: "المصدر: الفقرة [16]"
        },
        {
            type: "MCQ",
            level: "حفظ",
            question: "صحيفة علي بن أبي طالب رضي الله عنه كانت تحتوي على:",
            options: ["تفسير القرآن", "مقادير الديات", "العقل وفكاك الأسير", "أحاديث الفتن"],
            correct: 2,
            explanation: "صحيفة علي كان فيها العقل وفكاك الأسير.",
            citation: "المصدر: الفقرة [17]"
        },
        {
            type: "TF",
            level: "سطحي",
            question: "الصحابي سعد بن عبادة رضي الله عنه كان له صحيفة حديثية.",
            options: ["صح", "خطأ"],
            correct: 0,
            explanation: "صحيح، ذكر النص أن له صحيفة.",
            citation: "المصدر: الفقرة [17]"
        },
        {
            type: "MCQ",
            level: "استنتاجي",
            question: "قصة (أبي شاه) تدل على:",
            options: ["منع كتابة الحديث", "الإذن بكتابة الحديث في العهد النبوي", "ضعف ذاكرة العرب", "نسخ القرآن للسنة"],
            correct: 1,
            explanation: "قال النبي ﷺ 'اكتبوا لأبي شاه'، مما يدل على جواز الكتابة.",
            citation: "المصدر: الفقرة [18]"
        },

        // --- القسم الرابع: مراحل التدوين (تاريخي) ---
        {
            type: "MCQ",
            level: "تاريخي",
            question: "مرحلة (عصر الوحي) تمتد من:",
            options: ["البعثة إلى وفاة النبي ﷺ", "وفاة النبي إلى 40هـ", "40هـ إلى 100هـ", "100هـ إلى 300هـ"],
            correct: 0,
            explanation: "عصر الوحي يمتد من البعثة إلى وفاة النبي ﷺ (السنة 11هـ).",
            citation: "المصدر: الفقرة [19]"
        },
        {
            type: "MCQ",
            level: "تاريخي",
            question: "متى بدأت مرحلة (التدوين الذهبي) وتصنيف الكتب الستة؟",
            options: ["في عهد الصحابة", "من سنة 40هـ إلى 100هـ", "من سنة 100هـ إلى 300هـ تقريباً", "بعد سنة 400هـ"],
            correct: 2,
            explanation: "مرحلة التدوين الذهبي بدأت من 100هـ إلى حدود 300هـ.",
            citation: "المصدر: الفقرة [20]"
        },
        {
            type: "TF",
            level: "تاريخي",
            question: "الخليفة الذي أمر بتدوين السنة رسمياً هو عمر بن الخطاب.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، هو عمر بن عبد العزيز (على رأس المائة الأولى).",
            citation: "المصدر: الفقرة [20]"
        },
        {
            type: "MCQ",
            level: "فهم",
            question: "مرحلة الخلافة الراشدة تنتهي بـ:",
            options: ["وفاة أبي بكر", "استشهاد علي بن أبي طالب (40هـ)", "عام الجماعة", "وفاة عمر بن عبد العزيز"],
            correct: 1,
            explanation: "تمتد لنهاية الخلافة الراشدة باستشهاد علي سنة 40هـ.",
            citation: "المصدر: الفقرة [19]"
        },

        // --- القسم الخامس: الإحصائيات والأرقام (دقيق/حفظ) ---
        {
            type: "MCQ",
            level: "إحصائي",
            question: "أكبر رقم ذُكر لعدد الصحابة (حسب قول أبي زرعة الرازي) هو:",
            options: ["60 ألفاً", "114 ألفاً", "10 آلاف", "1500"],
            correct: 1,
            explanation: "قال أبو زرعة: قبض رسول الله عن 114 ألفاً من الصحابة.",
            citation: "المصدر: الفقرة [21]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "عدد الصحابة الذين هم (رواة للحديث) ووصلت إلينا مروياتهم يقارب:",
            options: ["114 ألف", "10 آلاف", "1500", "4000"],
            correct: 2,
            explanation: "لم يتجاوز عدد رواة الحديث 1500 صحابي.",
            citation: "المصدر: الفقرة [22]"
        },
        {
            type: "TF",
            level: "إحصائي",
            question: "نسبة الصحابة الرواة إلى مجموع الصحابة الكلي تمثل حوالي 50%.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، النسبة هي 2% فقط.",
            citation: "المصدر: الفقرة [22]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "وفقاً لإحصاء ابن حزم، عدد الصحابة الذين رووا حديثاً واحداً فقط هو:",
            options: ["120", "238", "458", "1000"],
            correct: 2,
            explanation: "أصحاب الآحاد عددهم 458 صحابياً.",
            citation: "المصدر: الفقرة [23]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "من هم (السبعة المكثرون)؟ هم الذين رووا:",
            options: ["أكثر من 5000 حديث", "أكثر من 1000 حديث", "من 100 إلى 200 حديث", "أحاديث الآحاد"],
            correct: 1,
            explanation: "المكثرون هم السبعة الذين تجاوزت رواياتهم الألف (أبو هريرة، ابن عمر، أنس، عائشة، ابن عباس، جابر، أبو سعيد).",
            citation: "المصدر: الفقرة [24-26]"
        },
        {
            type: "TF",
            level: "إحصائي",
            question: "أبو هريرة هو أكثر الصحابة رواية بعدد 5374 حديثاً.",
            options: ["صح", "خطأ"],
            correct: 0,
            explanation: "صحيح، هو الأكثر رواية مطلقاً.",
            citation: "المصدر: الفقرة [26]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "كم عدد أحاديث عبد الله بن عمر رضي الله عنهما؟",
            options: ["2286", "2630", "1660", "1540"],
            correct: 1,
            explanation: "عبد الله بن عمر روى 2630 حديثاً.",
            citation: "المصدر: الفقرة [26]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "كم عدد أحاديث أنس بن مالك رضي الله عنه؟",
            options: ["2630", "2286", "2210", "1170"],
            correct: 1,
            explanation: "أنس بن مالك روى 2286 حديثاً.",
            citation: "المصدر: الفقرة [26]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "كم عدد أحاديث أم المؤمنين عائشة رضي الله عنها؟",
            options: ["2210", "1660", "1540", "5374"],
            correct: 0,
            explanation: "عائشة روت 2210 أحاديث.",
            citation: "المصدر: الفقرة [26]"
        },
        {
            type: "MCQ",
            level: "إحصائي",
            question: "أقل السبعة المكثرين رواية هو أبو سعيد الخدري بعدد:",
            options: ["1000", "1170", "900", "1500"],
            correct: 1,
            explanation: "أبو سعيد الخدري روى 1170 حديثاً.",
            citation: "المصدر: الفقرة [27]"
        },
        {
            type: "TF",
            level: "فهم عميق",
            question: "عدد الأحاديث المنسوبة لأبي هريرة يعني أن لديه 5374 متناً مستقلاً لا يشاركه فيها أحد.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، الأحاديث مشتركة، قد يروي هو وعائشة نفس الحديث ويحسب لكل منهما.",
            citation: "المصدر: الفقرة [28]"
        },

        // --- القسم السادس: شبهة الكذب والرد عليها (نقدي/إبداعي) ---
        {
            type: "MCQ",
            level: "نقدي",
            question: "ما الرد على من زعم أن تحذير النبي ﷺ من الكذب دليل على وقوعه في زمنه؟",
            options: ["أن الكذب وقع قليلاً", "أن التحذير هو إخبار غيبي عما سيقع في آخر الزمان وليس دليلاً على وقوعه آنذاك", "أن الصحابة كانوا يكذبون", "لا يوجد رد"],
            correct: 1,
            explanation: "النص أوضح أن النبي يخبر عما سيقع في المستقبل (دجالون كذابون) وليس عما يقع في زمنه.",
            citation: "المصدر: الفقرة [29]"
        },
        {
            type: "MCQ",
            level: "استنتاجي",
            question: "ما الدليل الاجتماعي الذي يمنع وقوع الكذب على النبي ﷺ من المشركين؟",
            options: ["خوفهم من السجن", "استقباح العرب للكذب واعتباره عاراً", "عدم اهتمامهم بالنبي", "انشغالهم بالحروب"],
            correct: 1,
            explanation: "العرب كانت تستقبح الكذب، كما في قصة أبي سفيان مع هرقل.",
            citation: "المصدر: الفقرة [30]"
        },
        {
            type: "TF",
            level: "تحليلي",
            question: "امتنع أبو سفيان عن الكذب على النبي ﷺ أمام هرقل لأنه كان مسلماً خائفاً من الله.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، كان مشركاً، وامتنع لأن العرب تعير الكاذب، خاف أن (يأثر قومه عليه كذباً).",
            citation: "المصدر: الفقرة [31]"
        },
        {
            type: "MCQ",
            level: "عقدي",
            question: "ما الرادع الذي منع المنافقين من الكذب علناً على النبي ﷺ؟",
            options: ["قوة عمر بن الخطاب", "الخوف من نزول الوحي بفضحهم", "عدم معرفتهم بالأحاديث", "حبهم للنبي في الباطن"],
            correct: 1,
            explanation: "يحذر المنافقون أن تنزل عليهم سورة تنبئهم بما في قلوبهم.",
            citation: "المصدر: الفقرة [32]"
        },
        {
            type: "TF",
            level: "نقدي",
            question: "لو وقع الكذب في عهد النبي ﷺ لاستغله المشركون كحجة ضد الإسلام.",
            options: ["صح", "خطأ"],
            correct: 0,
            explanation: "صحيح، لقالوا كيف نصدقك وأصحابك يكذبون عليك، ولكن هذا لم يحدث.",
            citation: "المصدر: الفقرة [32]"
        },

        // --- القسم السابع: أسئلة متنوعة وإضافية لتكملة الـ 100 (مستويات مختلفة) ---
        {
            type: "MCQ",
            level: "فهم",
            question: "من القائل: (الأحاديث الرائعة لا تحتاج إلى أسانيد)؟",
            options: ["عالم حديث", "أحد المتصدرين المعاصرين الذين حذر النص منهم", "الإمام البخاري", "أبو هريرة"],
            correct: 1,
            explanation: "هذه مقولة ذكرها المحاضر عن شخص يضلل الناس ويسقط علم الحديث.",
            citation: "المصدر: الفقرة [33]"
        },
        {
            type: "TF",
            level: "تطبيقي",
            question: "يجوز رواية الحديث بالمعنى في مجالس الرواية العلمية (حدثنا وأخبرنا) حالياً.",
            options: ["صح", "خطأ"],
            correct: 1,
            explanation: "خطأ، لا يصح في مجالس الرواية خاصة مع توفر الكتب، إنما رخص فيه في المواعظ للعالم بالمعاني.",
            citation: "المصدر: الفقرة [34]"
        },
        {
            type: "MCQ",
            level: "سلوك",
            question: "ما حكم المزاح بنسبة قول للنبي ﷺ لم يقله؟",
            options: ["مكروه", "حرام ومن سوء الأدب", "جائز للضحك", "مستحب"],
            correct: 1,
            explanation: "لا يجوز ويعتبر من سوء الأدب مع النبي ﷺ.",
            citation: "المصدر: الفقرة [35]"
        },
        {
            type: "MCQ",
            level: "سلوك",
            question: "كيف كان الإمام مالك يعظم حديث النبي ﷺ؟",
            options: ["يقرؤه وهو ماشي", "يغتسل ويلبس أفضل ثيابه ويجلس بهيبة", "يقرؤه بصوت منخفض", "لا يحدث به إلا نادراً"],
            correct: 1,
            explanation: "كان يغتسل ويلبس ويتطيب ويجلس جلسة المرتعد المهيب توقيراً للحديث.",
            citation: "المصدر: الفقرة [35]"
        },
        {
            type: "MCQ",
            level: "تحليلي",
            question: "لماذا لم يروِ أبو بكر الصديق أحاديث كثيرة مثل أبي هريرة؟",
            options: ["لأنه نسي", "لانشغاله بالخلافة ووفاته مبكراً مع وجود الصحابة", "لأنه لم يلازم النبي", "لأنه كان يفضل الرأي"],
            correct: 1,
            explanation: "قصر مدة حياته بعد النبي (سنتان ونصف) وانشغاله بالدولة، وتوافر الصحابة قلل الحاجة لروايته.",
            citation: "المصدر: الفقرة [36]"
        },
        {
            type: "TF",
            level: "تحليلي",
            question: "لو عاش أبو بكر الصديق طويلاً لروى أكثر من أبي هريرة.",
            options: ["صح", "خطأ"],
            correct: 0,
            explanation: "صحيح، النص يذكر: لو عاش إلى سنة 50 أو 60 هـ لروى أكثر، فالقضية قضية احتياج وظرف.",
            citation: "المصدر: الفقرة [36]"
        },
        {
            type: "MCQ",
            level: "تاريخي",
            question: "توفي أنس بن مالك سنة:",
            options: ["59هـ", "93هـ", "68هـ", "10هـ"],
            correct: 1,
            explanation: "أنس توفي سنة 93هـ.",
            citation: "المصدر: الفقرة [37]"
        },
        {
            type: "MCQ",
            level: "تاريخي",
            question: "توفي أبو هريرة سنة:",
            options: ["93هـ", "59هـ", "68هـ", "11هـ"],
            correct: 1,
            explanation: "أبو هريرة توفي سنة 59هـ.",
            citation: "المصدر: الفقرة [38]"
        },
        {
            type: "MCQ",
            level: "تاريخي",
            question: "عبد الله بن عباس توفي سنة:",
            options: ["68هـ", "59هـ", "93هـ", "40هـ"],
            correct: 0,
            explanation: "ابن عباس توفي سنة 68هـ.",
            citation: "المصدر: الفقرة [38]"
        },
        {
            type: "MCQ",
            level: "فهم",
            question: "الكتاب الذي نصح المحاضر بقراءته للرد على الشبهات هو:",
            options: ["البداية والنهاية", "السنة ومكانتها في التشريع الإسلامي للسباعي", "فتح الباري", "زاد المعاد"],
            correct: 1,
            explanation: "نصح بكتاب الدكتور مصطفى السباعي.",
            citation: "المصدر: الفقرة [39]"
        },
        // --- المزيد من الأسئلة للوصول إلى 100 (تفريعات وتفاصيل دقيقة) ---
        {type: "TF", level: "تعريف", question: "الصحابي هو من لقي النبي ﷺ مؤمناً به ومات على الإسلام ولو تخللت ذلك ردة.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، التعريف الراجح: من لقيه مسلماً ومات على الإسلام.", citation: "المصدر: الفقرة [40]"},
        {type: "MCQ", level: "إحصاء", question: "عدد الصحابة الذين رووا ما بين 200 إلى 1000 حديث:", options: ["10", "20", "50", "3"], correct: 0, explanation: "هم عشرة فقط.", citation: "المصدر: الفقرة [23]"},
        {type: "MCQ", level: "إحصاء", question: "عدد الصحابة الذين رووا ما بين 1000 إلى 2000 حديث:", options: ["3", "4", "10", "20"], correct: 0, explanation: "عددهم ثلاثة فقط.", citation: "المصدر: الفقرة [23]"},
        {type: "TF", level: "فهم", question: "أحاديث أنس بن مالك تتضمن كثيراً من وصف أفعال النبي ﷺ لأنه كان خادمه.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، بحكم خدمته وملازمته.", citation: "المصدر: الفقرة [41]"},
        {type: "TF", level: "فهم", question: "هيلاري كلينتون ذكرت في النص كمثال على ضخامة المذكرات لشخص عاش أحداثاً قليلة مقارنة بعائشة.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، ضرب بها المحاضر مثلاً للتقريب.", citation: "المصدر: الفقرة [42]"},
        {type: "MCQ", level: "استنتاج", question: "الدافع الديني للصحابة جعلهم:", options: ["يكثرون من الرواية بلا ضابط", "يقلون من الرواية خشية الخطأ والوعيد", "يعتزلون الناس", "يكتبون الكتب فقط"], correct: 1, explanation: "الخوف من الوعيد جعلهم يقلون ويتهيبون.", citation: "المصدر: الفقرة [7]"},
        {type: "MCQ", level: "لغوي", question: "في حديث (نضّر الله امرأً)، كلمة (نضّر) تعني:", options: ["أعطى ذهباً", "جمَّل وحسَّن وجهه", "أطال عمره", "غفر ذنبه"], correct: 1, explanation: "بمعنى الوجه النضير والمشرق.", citation: "المصدر: الفقرة [10]"},
        {type: "TF", level: "تاريخي", question: "كان النبي ﷺ يكتب رسائل للملوك والعمال.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، اتخذ خاتماً وكاتباً لذلك.", citation: "المصدر: الفقرة [17]"},
        {type: "MCQ", level: "فهم", question: "الحديث: (من كتم علماً ألجمه الله بلجام من نار) كان دافعاً للصحابة لـ:", options: ["الصمت", "التبليغ قبل الموت", "الهجرة", "القتال"], correct: 1, explanation: "كانوا يحرصون على التبليغ خشية كتمان العلم.", citation: "المصدر: الفقرة [43]"},
        {type: "TF", level: "تاريخي", question: "أكبر رقم لعدد الصحابة ذكره الإمام الرافعي القزويني هو 60 ألفاً.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، الرافعي قال 60 ألفاً.", citation: "المصدر: الفقرة [21]"},
        {type: "MCQ", level: "تاريخي", question: "عدد الصحابة في حجة الوداع كان يقارب:", options: ["10 آلاف", "100 ألف", "300 ألف", "5000"], correct: 1, explanation: "ما يقرب من 80 أو 100 ألف.", citation: "المصدر: الفقرة [44]"},
        {type: "MCQ", level: "تحليلي", question: "لماذا لم يروِ عبد الله بن مسعود بقدر أبي هريرة؟", options: ["لأنه توفي مبكراً نسبياً", "لأنه نسي", "لأنه لم يكتب", "لأنه كان مشغولاً"], correct: 0, explanation: "نفس علة كبار الصحابة (الوفاة المبكرة والاستغناء عنه بوجود غيره).", citation: "المصدر: الفقرة [36] (قياساً)"},
        {type: "TF", level: "فهم", question: "قوله (يأتونكم من الأحاديث بما لم تسمعوا أنتم ولا آباؤكم) يشير إلى الابتداع في الدين.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، يشير للدجالين الذين يخترعون أحاديث.", citation: "المصدر: الفقرة [45]"},
        {type: "MCQ", level: "تعريف", question: "العدل في مصطلح الحديث هو:", options: ["من يعطي الناس حقوقهم", "من يوثق بدينه ويؤتمن في أخباره", "الحاكم العادل", "القاضي"], correct: 1, explanation: "تعريف العدل في النص: من يوثق بدينه ويؤتمن في أخباره.", citation: "المصدر: الفقرة [4]"},
        {type: "TF", level: "فهم", question: "الآية (يَحۡذَرُ ٱلۡمُنَٰفِقُونَ أَن تُنَزَّلَ عَلَيۡهِمۡ سُورَةٞ) من سورة التوبة.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [46]"},
        {type: "MCQ", level: "إحصائي", question: "عدد أصحاب المئين (من رووا 20-100 حديث):", options: ["91 صحابياً", "10 صحابة", "20 صحابياً", "50 صحابياً"], correct: 0, explanation: "عددهم 91 صحابياً.", citation: "المصدر: الفقرة [23]"},
        {type: "TF", level: "إحصائي", question: "عدد من رووا حديثين اثنين فقط هو 120 صحابياً.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [23]"},
        {type: "MCQ", level: "فهم", question: "حديث (لا ضرر ولا ضرار) مثال على:", options: ["الأحاديث الطويلة", "الجوامع القصيرة والتقريرات", "أحاديث الفتن", "المنسوخ"], correct: 1, explanation: "مثال على أن الحديث قد يكون كلمات قليلة.", citation: "المصدر: الفقرة [47]"},
        {type: "TF", level: "فهم", question: "السنة النبوية هي المصدر الثاني للتشريع ولا يمكن الاستغناء عنها.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [48]"},
        {type: "MCQ", level: "تاريخي", question: "أبو هريرة لازم النبي ﷺ مدة:", options: ["10 سنوات", "3 أو 4 سنوات (من السنة 7هـ)", "23 سنة", "سنة واحدة"], correct: 1, explanation: "أسلم سنة 7هـ ولازمه حتى الوفاة (حوالي 4 سنوات).", citation: "المصدر: الفقرة [15]"},
        {type: "TF", level: "تاريخي", question: "كان أبو هريرة متزوجاً وله تجارة تشغله عن النبي ﷺ.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ، كان أعزباً ومن أهل الصفة متفرغاً.", citation: "المصدر: الفقرة [15]"},
        {type: "MCQ", level: "بياني", question: "الرسم البياني للمكثرين يظهر أن عددهم:", options: ["كبير جداً", "قليل جداً (قمة الهرم)", "متوسط", "غير معروف"], correct: 1, explanation: "عددهم قليل جداً، قاعدة الهرم هم المقلون.", citation: "المصدر: الفقرة [25]"},
        {type: "TF", level: "فهم", question: "القول بأن (لولا أنهم كذبوا لما حذر النبي) هو قول نابع عن حسن نية.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ، نابع عن سوء نية وجهل.", citation: "المصدر: الفقرة [49]"},
        {type: "MCQ", level: "فهم", question: "معنى (التبين) في آية الحجرات يشمل:", options: ["التثبت من حال الراوي وصحة الخبر", "رفض الخبر", "قبول الخبر", "نسيان الخبر"], correct: 0, explanation: "يشمل التثبت من الراوي والمتن.", citation: "المصدر: الفقرة [50]"},
        {type: "TF", level: "تطبيق", question: "إذا شككت في صحة حديث، فالأفضل روايته مع التنبيه.", options: ["صح", "خطأ"], correct: 0, explanation: "نعم، إذا رويته يجب أن تبين حاله، والأفضل التثبت.", citation: "المصدر: الفقرة [51]"},
        {type: "MCQ", level: "تاريخي", question: "الصحابي الذي روى 1540 حديثاً هو:", options: ["جابر بن عبد الله", "ابن عباس", "ابن عمر", "أبو هريرة"], correct: 0, explanation: "جابر بن عبد الله.", citation: "المصدر: الفقرة [26]"},
        {type: "MCQ", level: "تاريخي", question: "الصحابي الذي روى 1660 حديثاً هو:", options: ["ابن عباس", "جابر", "عائشة", "أنس"], correct: 0, explanation: "ابن عباس.", citation: "المصدر: الفقرة [26]"},
        {type: "TF", level: "فهم", question: "كل الصحابة كانوا علماء فقهاء.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ، 2% رواة، والباقي عوام ومجاهدون.", citation: "المصدر: الفقرة [52]"},
        {type: "MCQ", level: "فهم", question: "الفائدة من ذكر عدد أحاديث عائشة (2210) مقارنة بحياتها الطويلة مع النبي:", options: ["إثبات أنها روت كل شيء", "بيان أن العدد قليل مقارنة بطول العشرة (احتياط)", "بيان أنها نسيت", "لا شيء"], correct: 1, explanation: "بيان أن العدد قليل ومنطقي وليس مضخماً.", citation: "المصدر: الفقرة [42]"},
        {type: "TF", level: "فهم", question: "الإمام الحاكم النيسابوري قال إن عدد الرواة 4000، وخالفه الذهبي.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، الذهبي رجح أنهم لا يبلغون 2000.", citation: "المصدر: الفقرة [22]"},
        {type: "MCQ", level: "إحصاء", question: "عدد أصحاب الألوف (الذين رووا > 1000) في الجدول:", options: ["7", "4 + 3 = 7", "10", "100"], correct: 1, explanation: "4 (فوق 2000) + 3 (بين 1000-2000) = 7.", citation: "المصدر: الفقرة [24]"},
        {type: "TF", level: "عام", question: "العرب في الجاهلية كانوا يبيحون الكذب.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ، كانوا يستقبحونه.", citation: "المصدر: الفقرة [30]"},
        {type: "MCQ", level: "استنتاج", question: "أي الآيات التالية تدل على منهج (الجرح والتعديل)؟", options: ["آية الدين", "آية الحجرات (إن جاءكم فاسق)", "آية الكرسي", "آية الوضوء"], correct: 1, explanation: "آية الحجرات أصل في النظر في حال الراوي.", citation: "المصدر: الفقرة [3]"},
        {type: "TF", level: "فهم", question: "المقصود بـ (نضرة الوجه) في الحديث هو الجمال المعنوي والحسي في الآخرة والدنيا.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، دعاء بالبهاء والنور.", citation: "المصدر: الفقرة [10]"},
        {type: "MCQ", level: "تاريخي", question: "بدأ التدوين الرسمي بأمر من:", options: ["عمر بن عبد العزيز", "معاوية", "أبو جعفر المنصور", "هارون الرشيد"], correct: 0, explanation: "عمر بن عبد العزيز.", citation: "المصدر: الفقرة [20]"},
        {type: "TF", level: "فهم", question: "مرحلة (الأمر بالتدوين) سبقت مرحلة (التدوين الذهبي).", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، الأمر كان حوالي 100هـ، والذهبي بعدها.", citation: "المصدر: الفقرة [20]"},
        {type: "MCQ", level: "فهم", question: "حديث (من حدث عني بحديث يرى أنه كذب) يحذر من:", options: ["نقل الحديث الضعيف والموضوع دون بيان حاله", "الكتابة", "الحفظ", "السفر"], correct: 0, explanation: "يحذر من المشاركة في الكذب بنقله.", citation: "المصدر: الفقرة [51]"},
        {type: "TF", level: "لغوي", question: "كلمة (يفتري) في سورة النحل تدل على عظم جرم الكذب.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [1]"},
        {type: "MCQ", level: "عام", question: "كتاب (أسماء الصحابة وما لكل واحد منهم من العدد) من تأليف:", options: ["ابن حزم الظاهري", "البخاري", "مسلم", "أحمد بن حنبل"], correct: 0, explanation: "ابن حزم.", citation: "المصدر: الفقرة [52]"},
        {type: "TF", level: "فهم", question: "لم تكن هناك أي كتابة للحديث في عهد النبي ﷺ.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ، وجدت صحف وكتابات فردية.", citation: "المصدر: الفقرة [16]"},
        {type: "MCQ", level: "استنتاج", question: "ما العلاقة بين طول العمر وكثرة الرواية عند الصحابة؟", options: ["علاقة طردية (كلما عاش أطول زادت احتمالية كثرة الرواية)", "علاقة عكسية", "لا علاقة", "كلهم رووا بنفس القدر"], correct: 0, explanation: "طول العمر أدى لحاجة الناس إليهم فكثرت روايتهم.", citation: "المصدر: الفقرة [38]"},
        {type: "TF", level: "فهم", question: "الصحابة الذين ماتوا مبكراً مثل مصعب بن عمير وحمزة رضي الله عنهم قلت رواياتهم.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح، لأنهم توفوا قبل أن يحتاج الناس لعلمهم.", citation: "المصدر: الفقرة [36] (قياساً)"},
        {type: "MCQ", level: "فهم", question: "معنى (المتواتر) في الحديث:", options: ["ما رواه جمع عن جمع يستحيل تواطؤهم على الكذب", "ما رواه واحد", "الحديث الحسن", "الحديث الضعيف"], correct: 0, explanation: "تعريف التواتر.", citation: "المصدر: الفقرة [6]"},
        {type: "TF", level: "فهم", question: "قوله (إياكم وإياهم) في حديث الدجالين يعني اعتزالهم وعدم أخذ الدين عنهم.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [45]"},
        {type: "MCQ", level: "عام", question: "عدد روايات أبي بكر الصديق في الكتب:", options: ["قليل جداً مقارنة بالمكثرين", "أكثر من أبي هريرة", "مثل ابن عمر", "لا يوجد له روايات"], correct: 0, explanation: "قليلة لوفاته المبكرة.", citation: "المصدر: الفقرة [36]"},
        {type: "TF", level: "فهم", question: "من يروي حديثاً وهو يظن أنه صحيح ثم تبين ضعفه، فهو كاذب متعمد.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ، هذا خطأ وليس تعمداً للكذب.", citation: "المصدر: الفقرة [53]"},
        {type: "MCQ", level: "فهم", question: "حديث (من كذب علي) رواه:", options: ["أبو هريرة فقط", "أكثر من 70 صحابياً", "عمر بن الخطاب فقط", "علي بن أبي طالب فقط"], correct: 1, explanation: "رواه أكثر من 70 صحابياً.", citation: "المصدر: الفقرة [6]"},
        {type: "TF", level: "فهم", question: "الصحابة كانوا يتورعون عن الفتيا والرواية خشية الزلل.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [7]"},
        {type: "MCQ", level: "عام", question: "أكثر المرويات المسجلة في كتب الحديث هي من مرويات:", options: ["المهاجرين والأنصار الذين عاشوا طويلاً", "المنافقين", "أهل الكتاب", "التابعين فقط"], correct: 0, explanation: "الصحابة الذين عاشوا طويلاً.", citation: "المصدر: الفقرة [38]"},
        {type: "TF", level: "تاريخي", question: "عصر التدوين الذهبي شهد تأليف الكتب الستة ومسند أحمد.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [54]"},
        {type: "MCQ", level: "عام", question: "هل كان الصحابة يكتبون خطب النبي ﷺ؟", options: ["أحياناً (مثل خطبة أبي شاه)", "دائماً", "أبداً", "فقط في الحرب"], correct: 0, explanation: "أحياناً كما في قصة أبي شاه.", citation: "المصدر: الفقرة [18]"},
        {type: "TF", level: "إحصائي", question: "عدد الصحابة الذين رووا أحاديث (الآحاد) 458 صحابياً.", options: ["صح", "خطأ"], correct: 0, explanation: "صحيح.", citation: "المصدر: الفقرة [23]"},
        {type: "MCQ", level: "خاتمة", question: "الغرض من هذا المنهج في الإثبات هو:", options: ["تصعيب الدين", "حفظ الدين وصيانة الشريعة من الدخيل", "منع الناس من الحديث", "تخليد أسماء الرواة فقط"], correct: 1, explanation: "حفظ الدين وصيانة الشريعة.", citation: "المصدر: فهم عام للمحاضرة"}
    ];

    // متغيرات الحالة
    let currentQuestionIndex = 0;
    let score = 0;
    let userAnswers = new Array(quizData.length).fill(null);

    // عناصر واجهة المستخدم
    const questionArea = document.getElementById('question-area');
    const feedbackArea = document.getElementById('feedback-area');
    const feedbackTitle = document.getElementById('feedback-title');
    const feedbackContent = document.getElementById('feedback-content');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const qNumber = document.getElementById('q-number');
    const qLevel = document.getElementById('q-level');
    const progressBar = document.getElementById('progress-bar');

    // دالة بدء اللعبة
    function initGame() {
        loadQuestion();
    }

    // تحميل السؤال الحالي
    function loadQuestion() {
        const q = quizData[currentQuestionIndex];
        
        // تحديث الواجهة
        qNumber.textContent = currentQuestionIndex + 1;
        qLevel.textContent = q.level;
        progressBar.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
        
        // إخفاء الفيدباك
        feedbackArea.style.display = 'none';
        feedbackArea.className = 'feedback-section';
        
        // بناء السؤال
        let html = `
            <div class="question-meta">نوع السؤال: ${q.type === 'MCQ' ? 'اختيار من متعدد' : 'صواب أم خطأ'}</div>
            <div class="question-text">${q.question}</div>
            <div class="options-grid">
        `;

        q.options.forEach((opt, index) => {
            const isDisabled = userAnswers[currentQuestionIndex] !== null ? 'disabled' : '';
            let btnClass = 'option-btn';
            
            // إذا كان مجاباً عليه مسبقاً، نطبق التنسيق
            if (userAnswers[currentQuestionIndex] !== null) {
                if (index === q.correct) btnClass += ' correct';
                if (index === userAnswers[currentQuestionIndex] && index !== q.correct) btnClass += ' wrong';
            }

            html += `<button class="${btnClass}" onclick="handleAnswer(${index})" ${isDisabled}>${opt}</button>`;
        });

        html += `</div>`;
        questionArea.innerHTML = html;

        // تحديث حالة الأزرار
        updateNavButtons();

        // إذا كان مجاباً، أظهر الفيدباك
        if (userAnswers[currentQuestionIndex] !== null) {
            showFeedback(userAnswers[currentQuestionIndex]);
        }
    }

    // معالجة الإجابة
    function handleAnswer(selectedIndex) {
        if (userAnswers[currentQuestionIndex] !== null) return; // منع الإجابة مرتين

        userAnswers[currentQuestionIndex] = selectedIndex;
        const q = quizData[currentQuestionIndex];

        // تحديث الأزرار لتظهير الألوان
        const buttons = document.querySelectorAll('.option-btn');
        buttons[q.correct].classList.add('correct');
        
        if (selectedIndex !== q.correct) {
            buttons[selectedIndex].classList.add('wrong');
        }

        // تعطيل الأزرار
        buttons.forEach(btn => btn.disabled = true);

        // إظهار التغذية الراجعة
        showFeedback(selectedIndex);
        updateNavButtons();
    }

    // إظهار التفسير
    function showFeedback(selectedIndex) {
        const q = quizData[currentQuestionIndex];
        const isCorrect = selectedIndex === q.correct;

        feedbackArea.style.display = 'block';
        feedbackArea.className = `feedback-section ${isCorrect ? 'success' : 'error'}`;
        
        feedbackTitle.textContent = isCorrect ? 'إجابة صحيحة! ✅' : 'إجابة خاطئة ❌';
        feedbackContent.innerHTML = `
            ${isCorrect ? '' : `الصواب هو: <strong>${q.options[q.correct]}</strong><br><br>`}
            <strong>التفسير:</strong> ${q.explanation}
            <span class="citation">${q.citation}</span>
        `;
    }

    // التنقل
    function nextQuestion() {
        if (currentQuestionIndex < quizData.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
        }
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion();
        }
    }

    function updateNavButtons() {
        prevBtn.disabled = currentQuestionIndex === 0;
        
        // زر التالي مفعل فقط إذا تمت الإجابة، أو إذا كنا نراجع أسئلة سابقة
        const isAnswered = userAnswers[currentQuestionIndex] !== null;
        nextBtn.disabled = (currentQuestionIndex === quizData.length - 1) || !isAnswered;
    }

    // بدء التطبيق
    initGame();

</script>

</body>
</html>