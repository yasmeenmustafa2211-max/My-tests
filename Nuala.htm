<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار أصول الفقه - متقدم وفائق</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.8;
        }
        .container {
            max-width: 850px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 5px solid #005a8d;
        }
        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        h1 {
            color: #005a8d;
            font-size: 24px;
        }
        .status {
            font-weight: bold;
            color: #555;
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .question-box {
            margin-bottom: 20px;
        }
        .question-title {
            font-size: 19px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #111;
        }
        .options {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .option {
            background-color: #f9fbfd;
            border: 1px solid #dcdcdc;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: 500;
        }
        .option:hover {
            background-color: #eef4fa;
        }
        /* الألوان المطلوبة في التظليل */
        .option.correct {
            background-color: #d4edda !important;
            border-color: #c3e6cb !important;
            color: #155724;
            pointer-events: none;
        }
        .option.wrong {
            background-color: #fff3cd !important;
            border-color: #ffeeba !important;
            color: #856404;
            pointer-events: none;
        }
        .option.disabled {
            pointer-events: none;
            opacity: 0.6;
        }
        .explanation-box {
            display: none;
            background-color: #e9ecef;
            padding: 15px;
            border-right: 4px solid #005a8d;
            border-radius: 4px;
            margin-top: 20px;
            font-size: 15px;
            color: #222;
        }
        .buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        button {
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            background-color: #005a8d;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover:not(:disabled) {
            background-color: #004269;
        }
        button:disabled {
            background-color: #b0c4de;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>اختبار تحديد المستوى (متقدم وفائق)</h1>
    </div>
    
    <div class="status">
        <span id="q-counter">السؤال 1 من 30</span>
        <span id="q-type" style="color:#d9534f;">نوع السؤال: اختيار من متعدد</span>
    </div>

    <div class="question-box">
        <div class="question-title" id="q-text">جاري تحميل السؤال...</div>
        <ul class="options" id="options-container">
            <!-- سيتم حقن الخيارات هنا -->
        </ul>
    </div>

    <div class="explanation-box" id="explanation-box">
        <strong>التفسير من المصدر: </strong> <span id="exp-text"></span>
    </div>

    <div class="buttons-container">
        <button id="btn-next" onclick="nextQuestion()">التالي</button>
        <button id="btn-prev" onclick="prevQuestion()" disabled>السابق</button>
    </div>
</div>

<script>
    // قاعدة الأسئلة المستمدة حصرياً من النص المرفق
    const questions = [
        // ---------------- 15 سؤال اختيار من متعدد ----------------
        {
            type: "MCQ",
            question: "عند إضافة قيد 'المكتسبة' لتعريف الفقه اصطلاحاً: (الأحكام الشرعية العملية المكتسبة عن أدلتها التفصيلية)، فإن كل العلوم التالية تخرج بهذا القيد ما عدا:",
            options: [
                "علم الملائكة المأخوذ بالإلهام.",
                "علم النبي ﷺ بالأحكام المأخوذ عن طريق الوحي.",
                "علم الخضر عليه السلام الذي من لدن الله.",
                "علم المجتهد المستخرج بطرق الاستدلال وقواعد الأصول."
            ],
            correct: 3,
            explanation: "كلمة 'المكتسبة' تخرج العلم اللدني غير المكتسب كعلم الملائكة، وعلم النبي ﷺ المأخوذ بالوحي، وعلم الخضر. أما علم المجتهد فهو مكتسب عن طريق التعلم والنظر في الأدلة، ولذلك لا يخرج بل هو المقصود بالفقه."
        },
        {
            type: "MCQ",
            question: "وفقاً للمحاضرة، أي من العبارات التالية تصف بدقة الفرق بين 'المهارات (الملَكات)' و'المعلومات' عند الأئمة الأعلام كالإمام مالك في قصة أسئلة أهل خراسان؟",
            options: [
                "الفقيه الأصولي هو من امتلك المعلومات الفروعية كاملة حتى لو فقد المهارات الاستنباطية.",
                "الفقيه المجتهد بالفعل هو من امتلك الأدوات والمهارات، بينما المجتهد بالقوة هو من سرد الفروع الكثيرة.",
                "الاجتهاد بالقوة يعني امتلاك المجتهد للأدوات والمهارات التي تمكنه من استخراج الحكم عند البحث، وإن لم تحضره المعلومة الفروعية فوراً.",
                "العلم عند السلف كان مقتصراً على حفظ المسائل كحفظ صانع الخفاف للخفاف الجاهزة."
            ],
            correct: 2,
            explanation: "الإمام مالك أُعتبر مجتهداً بالقوة لأنه يمتلك المهارات والأدوات الأصولية لاستخراج الأحكام، ولا يضره أنه قال 'لا أدري' في بعض المسائل لأن المعلومات الفرعية لا تنحصر، والمهم هو امتلاك المَلَكة."
        },
        {
            type: "MCQ",
            question: "من خلال استقراء قاعدة (من الألفاظ ما إذا اجتمعا افترقا وإذا افترقا اجتمعا)، إذا ذُكر لفظا (الدين) و(الخُلق) في سياق حديث واحد كحديث التزويج، فإن الاستنتاج الأصولي الدقيق هو:",
            options: [
                "أنهما مترادفان تماماً لتأكيد المعنى الشرعي.",
                "أن الدين يُقصد به التعامل مع الخَلق، والخُلق يُقصد به التعامل مع الخالق.",
                "أن الدين يتعلق بالحال مع الله والتأدب معه، بينما الخُلق يتعلق بحسن التعامل مع الناس.",
                "أن الخُلق ينسخ الدين إذا اجتمعا في مسألة واحدة."
            ],
            correct: 2,
            explanation: "عند اجتماعهما يفترقان في المعنى؛ فالدين يكون متعلقاً بالحال مع الله عز وجل، والخُلق من الدين لكنه يختص هنا بالشق الثاني وهو التأدب مع خلق الله وحسن المعاملة."
        },
        {
            type: "MCQ",
            question: "كل الكتب والمصنفات التالية تُعد محاولات جادة لتنقية علم أصول الفقه من المباحث المنطقية والكلامية والخلافات اللفظية، ما عدا كتاب:",
            options: [
                "مزالق الأصوليين وبيان القدر المحتاج إليه للإمام الصنعاني.",
                "المستصفى في علم الأصول للإمام الغزالي.",
                "معالم أصول الفقه عند أهل السنة والجماعة للدكتور الجيزاني.",
                "الخلاف اللفظي عند الأصوليين للدكتور عبد الكريم النملة."
            ],
            correct: 1,
            explanation: "كتاب (المستصفى) للإمام الغزالي هو من الكتب التي تتابعت على إيراد المقدمات المنطقية في أول كتب أصول الفقه وإدخال الحدود المنطقية، وليس من الكتب التي نَقّت العلم منها."
        },
        {
            type: "MCQ",
            question: "أرجع ابن رشد الحفيد الخلاف الفقهي في مسألة 'مسح الرأس' بين الشافعية (وبعضه) والمالكية (وكله) إلى مسألة أصولية لغوية بحتة، وهي:",
            options: [
                "حجية الإجماع السكوتي في قضايا العبادات.",
                "دلالة (حروف المعاني) وتحديداً حرف الباء هل هو للتبعيض أم للإلصاق.",
                "الخلاف في القياس على التيمم.",
                "الناسخ والمنسوخ في آيات الوضوء."
            ],
            correct: 1,
            explanation: "أرجع ابن رشد الخلاف إلى دلالة حرف الباء في قوله تعالى (وَامْسَحُوا بِرُءُوسِكُمْ)، فمن اعتبر الباء للتبعيض قال بمسح بعض الرأس (الشافعية)، ومن اعتبرها للإلصاق قال بمسح كل الرأس (المالكية)."
        },
        {
            type: "MCQ",
            question: "أي من الآتية يُعد من (الأحكام الشرعية العلمية) التي تخرج عن تعريف الفقه الاصطلاحي لارتباطها بـ 'الفقه الأكبر'؟",
            options: [
                "معرفة شروط ومبطلات الصلاة.",
                "إدراك أن الكل أكبر من الجزء.",
                "معرفة نزول الندى في الليلة الشاتية.",
                "الإيمان الجازم بالله وحركة القلب داخل الصلاة من خشية ويقين."
            ],
            correct: 3,
            explanation: "الأحكام الشرعية العلمية (الفقه الأكبر) تتعلق بالاعتقاد وأعمال القلوب كالإيمان والخشية، وخرجت بكلمة 'العملية'. أما الكل أكبر من الجزء فهو حكم عقلي، ونزول الندى حكم عادي."
        },
        {
            type: "MCQ",
            question: "في معرض مناقشة (الحد والتعريف)، يُعيب المناطقة تعريف النبي ﷺ للإيمان (أن تؤمن بالله وملائكته...) بحجة أنه ليس جامعاً مانعاً لأنه:",
            options: [
                "اعتمد على الوحي ولم يعتمد على القياس الأرسطي.",
                "كرر لفظ الإيمان وعرّف الشيء بأجزائه وأركانه لا بحقيقته وجنسه وفصله.",
                "أدخل أعمال الجوارح في مسمى الإيمان.",
                "اقتصر على المسائل الغيبية فقط."
            ],
            correct: 1,
            explanation: "عند المناطقة، الحد يجب أن يتكون من جنس وفصل ولا يجوز تكرار اللفظ المُعَرَّف، ولأن النبي ﷺ قال 'أن تؤمن' وعرّفه بأركانه، اعتبره المناطقة تعريفاً غير معتبر، وهذا من التكلف."
        },
        {
            type: "MCQ",
            question: "إذا قلنا: 'كل قرض جر نفعاً مشروطاً فهو ربا'، فإن هذا التصنيف في أدوات الاجتهاد ينتمي حصراً إلى:",
            options: [
                "القواعد الأصولية.",
                "القواعد الفقهية الكبرى.",
                "الضوابط الفقهية.",
                "الأدلة الإجمالية."
            ],
            correct: 2,
            explanation: "الضابط الفقهي هو قاعدة تندرج تحتها مسائل في 'باب فقهي واحد' (وهنا باب الربا فقط)، بينما القاعدة الفقهية تشمل أبواباً مختلفة، والقاعدة الأصولية تتعلق بالأدلة الإجمالية."
        },
        {
            type: "MCQ",
            question: "الفرق الدقيق بين مفهوم الصحابي عند الأصوليين ومفهومه عند المحدثين، أن الأصوليين يشترطون:",
            options: [
                "رؤية النبي ﷺ بالعين المجردة ولو لمرة واحدة تخرج الكفيف كابن أم مكتوم.",
                "طول الصحبة والعشرة لأنهم يهتمون بملكة 'الفقه' لدى الراوي.",
                "اللقاء العابر والموت على الإسلام.",
                "العدالة الحديثية التي تبدأ بعد إثبات طول العشرة."
            ],
            correct: 1,
            explanation: "المحدث يكفيه 'اللقاء ولو لمرة' لأن غايته الرواية، بينما الأصولي يشترط 'من طالت صحبته وعشرته' لأنه يبحث عن فقه الراوي وعمق فهمه للتشريع ليُحتج بقوله."
        },
        {
            type: "MCQ",
            question: "يُعتبر علم أصول الفقه وعلم مصطلح الحديث من أقسام:",
            options: [
                "علوم الغايات؛ لأنها مقاصد في ذاتها.",
                "علوم المكملات كالتاريخ والسير.",
                "علوم الآلات؛ لأنها أدوات تُستعمل لضبط التعامل مع علوم الغايات.",
                "الأحكام الوضعية الصرفة."
            ],
            correct: 2,
            explanation: "علوم الآلات هي الوسائل والأدوات التي تُبنى عليها علوم الغايات لضبط استنباط الأحكام وقبول الروايات، ومنها أصول الفقه ومصطلح الحديث."
        },
        {
            type: "MCQ",
            question: "تُعد مسألة 'هل اللغات توقيفية أم اصطلاحية؟' في كتب الأصول مثالاً بارزاً على:",
            options: [
                "القواعد الأصولية التي تُستنبط منها مئات الفروع الفقهية.",
                "المسائل طويلة الذيل قليلة النيل التي لا ينبني عليها عمل أو أدب شرعي.",
                "الأدلة التفصيلية القطعية في الفقه الأكبر.",
                "الضوابط الفقهية المتعلقة بباب المعاملات اللغوية."
            ],
            correct: 1,
            explanation: "وصفها الأصوليون (كالشاطبي والسبكي) بأنها طويلة الذيل قليلة النيل (مسائل نظرية) لا ينبني عليها فروع فقهية أو آداب شرعية، ووضعها في الأصول يعتبر 'عارية'."
        },
        {
            type: "MCQ",
            question: "ما السبب الحقيقي الذي جعل العلماء يدرسون 'علم المنطق' رغم تحذير السلف منه كونه لا يترتب عليه فرع فقهي واحد؟",
            options: [
                "لأن الإمام الشافعي جعله أساساً في كتابه الرسالة.",
                "لأنه دليل إجمالي من أدلة الوحيين.",
                "وجوب اصطلاحي لفهم لغة كتب العلماء المتأخرين الذين صاغوا شروحاتهم بالحدود المنطقية.",
                "لأنه يثبت العقائد بالأدلة النقلية القطعية."
            ],
            correct: 2,
            explanation: "تعلم المنطق أصبح وجوباً اصطلاحياً (وليس شرعياً) لأن العلماء المتأخرين للأسف شرحوا أصول الفقه بل وعلوم البلاغة بالمصطلحات المنطقية، فجهلها يمنع فهم كتبهم."
        },
        {
            type: "MCQ",
            question: "أي من الخيارات التالية يُفرق بدقة بين 'القرآن المجمل' و'السنة المبينة' كما ذُكر في المحاضرة؟",
            options: [
                "القرآن نص مفصل لكل حركات الصلاة، والسنة جاءت للتأكيد فقط.",
                "القرآن أمر بإقامة الصلاة (نص مجمل)، والسنة بينت أركانها ومبطلاتها (نص مفصل).",
                "القرآن والسنة كلاهما تفصيلي لا إجمال فيهما مطلقاً.",
                "السنة مجملة في أحكام الحج والقرآن هو من فصّل صفة الحج كحديث جابر."
            ],
            correct: 1,
            explanation: "القرآن ذكر (وأقيموا الصلاة) كنص مجمل، بينما تفاصيل الشروط والأركان والمبطلات جاءت في السنة (صلوا كما رأيتموني أصلي)، ولذا لا غنى عن السنة لفهم المجمل."
        },
        {
            type: "MCQ",
            question: "في حديث (غسل يوم الجمعة واجب على كل محتلم)، أجمع الفقهاء على أنه سنة مؤكدة، والسبب الأصولي لعدم أخذهم بظاهر الإيجاب هو:",
            options: [
                "الحديث ضعيف سنداً عند المحدثين.",
                "أن كلمة 'واجب' هنا لغةً تعني تأكيد السنية، ولا يجب حملها على الاصطلاح الأصولي المتأخر (القطع بالإيجاب).",
                "أن دلالة الاقتران تقتضي الاستحباب.",
                "أن الإجماع السكوتي ينسخ الحديث المتواتر."
            ],
            correct: 1,
            explanation: "النبي ﷺ تكلم بلسان العرب، وكلمة 'واجب' لغة تحتمل تأكيد السنة، والاصطلاح الأصولي (القطع بالإيجاب) ظهر متأخراً في القرن الرابع أو الخامس، فلا تُحمل نصوص الوحي على اصطلاحات المتأخرين."
        },
        {
            type: "MCQ",
            question: "وجود كلمات مثل (سندس) و(إستبرق) في القرآن الكريم يدل على:",
            options: [
                "أن القرآن نزل بلغات أعجمية غير عربية تماشياً مع عالمية الرسالة.",
                "أنها كلمات مهجورة وحشية (غريب اللغة) للتحدي والتعجيز.",
                "أنها كلمات أصلها أعجمي لكن العرب عرّبتها وجرت عليها قواعدهم فأصبحت من 'اللسان العربي الفصيح'.",
                "أنها من المحكمات التي لا يفهمها إلا الراسخون في العلم."
            ],
            correct: 2,
            explanation: "القرآن نزل بـ 'لسان عربي مبين'. والكلمات المعربة (كـ طه، سندس) بعد أن تتكلم بها العرب وتُجري عليها قواعدها تصبح جزءاً من اللسان العربي الفصيح."
        },

        // ---------------- 15 سؤال صح وخطأ ----------------
        {
            type: "TF",
            question: "يُعد كتاب (الموافقات) للإمام الشاطبي من أهم الكتب التي أسست لضرورة التوسع في المسائل المنطقية وإدراجها كشرط لاستنباط الفروع الفقهية.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. الإمام الشاطبي هو من حذر من ذلك بقوة، وقرر في مقدماته أن كل مسألة أصولية لا ينبني عليها فروع فقهية أو آداب شرعية فوضعها في الأصول (عارية) والخوض فيها مذموم."
        },
        {
            type: "TF",
            question: "استخدم الأصوليون كلمة 'معرفة' بدلاً من 'العلم' في تعريف الفقه الاصطلاحي؛ لأن 'المعرفة' تشمل القطع (اليقين) والظن، وأغلب مسائل الفقه الخلافية مبنية على غلبة الظن.",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. العلم يُستعمل غالباً في اليقينيات القطعية، بينما الأحكام الفقهية فيها القطعي المجمع عليه وفيها الظني المختلف فيه، فكان لفظ 'المعرفة' أوسع وأدق لاحتواء الاثنين."
        },
        {
            type: "TF",
            question: "القاعدة الفقهية (مثل: المشقة تجلب التيسير) تختلف عن القاعدة الأصولية (مثل: النهي يقتضي التحريم) في أن القاعدة الفقهية أغلبية ولها استثناءات، بينما الأصولية كلية لا تتخلف.",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. القواعد الفقهية أغلبية تندرج تحتها مسائل من أبواب شتى ولها استثناءات، بينما القاعدة الأصولية كلية متعلقة بالأدلة الإجمالية لا تتخلف في أصلها."
        },
        {
            type: "TF",
            question: "كلمة الفقه في اصطلاح 'السلف' كانت مرادفة تماماً للحفظ وكثرة الرواية، ولم يكن يُشترط فيها الخشية أو العمل بطاعة الله.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. عند السلف كانت كلمة الفقه تعني الخشية والعمل بطاعة الله (ليس العلم بكثرة الرواية إنما العلم خشية الله)، ومن لم يعمل بعلمه لم يُسمّ فقيهاً عندهم."
        },
        {
            type: "TF",
            question: "علم الكلام هو العلم الذي ظهر قبل الشريعة بقرون ويبحث في مطلق الحقائق، بينما الفلسفة هي إثبات الحقائق الدينية بالأدلة اليقينية العقلية.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. العكس هو الصحيح. الفلسفة علم بحث في الحقائق قبل الشريعة بقرون، بينما علم الكلام هو الذي أسسه المتكلمون (المعتزلة والأشاعرة) لإثبات العقائد بأدلة عقلية."
        },
        {
            type: "TF",
            question: "وفقاً للتدرج الاصطلاحي، الفقه الأكبر يُعنى بالأحكام الشرعية الاعتقادية (العلميات)، بينما الفقه الأصغر يُعنى بالأحكام الشرعية العملية (فقه الجوارح).",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. الفقه الأكبر يتعلق بالاعتقاديات وأعمال القلوب (العلميات)، والفقه الأصغر يتعلق بالأحكام التكليفية العملية (كالصلاة والزكاة)."
        },
        {
            type: "TF",
            question: "الفرق الاصطلاحي الدقيق بين الثمرة والفائدة لعلم أصول الفقه، أن الثمرة هي استخراج الحكم الفعلي المترتب، بينما الفائدة هي امتلاك المجتهد للقدرة والمَلَكة الاستنباطية.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. العكس صحيح. الثمرة هي القدرة والمَلَكة على استنباط الأحكام (سواء استنبط أم لا)، والفائدة هي عين الاستخراج الفعلي (التطبيق المترتب على المَلَكة)."
        },
        {
            type: "TF",
            question: "مصطلح (غريب القرآن) يُقصد به الألفاظ الوحشية التي كان يتكلم بها الناس في البادية البعيدة ولا صلة لها بلغة فصحاء قريش.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. الألفاظ الوحشية هي (غريب اللغة). أما (غريب القرآن) فهي ألفاظ عربية فصيحة لكنها مبهمة تحتاج لبيان لبعض العرب أو الأعاجم، والقرآن خالي تماماً من الألفاظ الوحشية المهجورة."
        },
        {
            type: "TF",
            question: "موقف فصحاء العرب من (الأحرف المقطعة) في أوائل السور أنهم لم يعترضوا عليها؛ لأن إطلاق الحرف وإرادة الكلمة كاملة كان من صميم فصاحتهم وكلامهم المألوف.",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. لم يعترض العرب لأنهم كانوا يطلقون الحرف ويريدون الكلمة كقولهم (قالت قاف) أي وقفت، و (فا.. تا) أي فشر وتشاء."
        },
        {
            type: "TF",
            question: "يُعتبر الإمام محمد بن إدريس الشافعي واضع علم أصول الفقه اصطلاحاً؛ لأنه أول من صنف مصنفاً مستقلاً (الرسالة) جمع فيه رؤوس مسائل وأبواب هذا العلم.",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. واضع العلم اصطلاحاً هو أول من صنف مصنفاً مستقلاً يجمع فيه رؤوس المسائل الأساسية، وهذا ما فعله الشافعي في الرسالة."
        },
        {
            type: "TF",
            question: "استنباط القاعدة الأصولية (الأصل في الأمر الوجوب) مأخوذ من المنطق الأرسطي ولا يوجد عليه دليل من القرآن أو السنة.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. القواعد الأصولية مستمدة من الوحيين ولغة العرب، واستُدل على هذه القاعدة بحديث (لولا أن أشق على أمتي لأمرتهم بالسواك)، فاقتران المشقة بالأمر دل على الوجوب."
        },
        {
            type: "TF",
            question: "الإجماع، والقياس، والاستصحاب، والمصالح المرسلة تُعد جميعها أمثلة حصرية على 'الأدلة التفصيلية' التي يبحث فيها علم الفقه.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. هذه أمثلة على (الأدلة الإجمالية) التي يبحث فيها علم أصول الفقه. أما الأدلة التفصيلية فهي الآيات المحددة والأحاديث المعينة المقرونة بمسألة فقهية بعينها."
        },
        {
            type: "TF",
            question: "الفرق الجوهري بين الحد والتعريف عند المناطقة، أن الحد أخص ويُشترط فيه أن يكون (جامعاً مانعاً) ويتكون من جنس وفصل، بينما التعريف أعم.",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. المناطقة يعتبرون الحد دقيقاً جداً (جنس وفصل مانع جامع مثل الإنسان حيوان ناطق)، ويعتبرون التعريف أعم وأقل تدقيقاً (مثل الإنسان حيوان ضاحك)."
        },
        {
            type: "TF",
            question: "حكم الشارع في تعلم علم أصول الفقه أنه فرض كفاية مطلقاً في حق جميع الناس، ولا يتحول إلى فرض عين أبداً مهما تعدد العلماء أو تفردوا.",
            options: ["صح", "خطأ"],
            correct: 1, // خطأ
            explanation: "خطأ. يكون فرض عين إذا تفرد العالم في البلد فلا يوجد غيره، وإذا تعدد العلماء باختصاصات مختلفة، فإنه يجب وجوباً عينياً على (الفقهاء) منهم تحديداً."
        },
        {
            type: "TF",
            question: "كلمة 'أصول الفقه' كلقب للعلم تُعرف بأنها: 'علم يبحث عن أدلة الفقه الإجمالية وكيفية الاستفادة منها وحال المستفيد (المجتهد)'.",
            options: ["صح", "خطأ"],
            correct: 0, // صح
            explanation: "صح. هذا هو التعريف اللقبي لعلم أصول الفقه، فهو يبحث في الأدلة الإجمالية (كالأمر للوجوب)، وكيفية الاستفادة منها (طرق الاستنباط)، وحال المستفيد (شروط المجتهد)."
        }
    ];

    let currentIndex = 0;
    let answered = false;

    // عناصر HTML
    const qCounter = document.getElementById('q-counter');
    const qType = document.getElementById('q-type');
    const qText = document.getElementById('q-text');
    const optionsContainer = document.getElementById('options-container');
    const expBox = document.getElementById('explanation-box');
    const expText = document.getElementById('exp-text');
    const btnNext = document.getElementById('btn-next');
    const btnPrev = document.getElementById('btn-prev');

    // دالة تحميل السؤال
    function loadQuestion(index) {
        answered = false;
        const q = questions[index];
        
        qCounter.innerText = `السؤال ${index + 1} من ${questions.length}`;
        qType.innerText = q.type === 'MCQ' ? 'نوع السؤال: اختيار من متعدد' : 'نوع السؤال: صح أو خطأ';
        qText.innerText = q.question;
        
        optionsContainer.innerHTML = '';
        expBox.style.display = 'none';

        q.options.forEach((opt, i) => {
            const li = document.createElement('li');
            li.className = 'option';
            li.innerText = opt;
            li.onclick = () => selectOption(i, q.correct, q.explanation);
            optionsContainer.appendChild(li);
        });

        btnPrev.disabled = index === 0;
        btnNext.innerText = index === questions.length - 1 ? 'إنهاء الاختبار' : 'التالي';
    }

    // دالة اختيار الإجابة
    function selectOption(selectedIndex, correctIndex, explanation) {
        if (answered) return;
        answered = true;

        const allOptions = optionsContainer.children;
        for (let i = 0; i < allOptions.length; i++) {
            allOptions[i].classList.add('disabled');
            if (i === correctIndex) {
                allOptions[i].classList.add('correct');
            } else if (i === selectedIndex && selectedIndex !== correctIndex) {
                allOptions[i].classList.add('wrong');
            }
        }

        expText.innerText = explanation;
        expBox.style.display = 'block';
    }

    // التنقل
    function nextQuestion() {
        if (currentIndex < questions.length - 1) {
            currentIndex++;
            loadQuestion(currentIndex);
        } else {
            alert("مبارك! لقد أتممت الاختبار المتقدم بنجاح، يمكنك الآن الانتقال للدرس الثاني.");
        }
    }

    function prevQuestion() {
        if (currentIndex > 0) {
            currentIndex--;
            loadQuestion(currentIndex);
        }
    }

    // بدء الاختبار عند التحميل
    window.onload = () => loadQuestion(currentIndex);

</script>

</body>
</html>