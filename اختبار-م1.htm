<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبر نفسك: مبادئ وأصول علوم القرآن</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #27ae60;
            --error-color: #f1c40f; /* أصفر للإجابة الخاطئة */
            --bg-color: #f8f9fa;
            --text-color: #2d3436;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 1.8rem;
        }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-box {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #dfe6e9;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            text-align: right;
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover:not([disabled]) {
            background-color: #f1f2f6;
            border-color: var(--primary-color);
        }

        /* تنسيقات الإجابة الصحيحة والخاطئة */
        .option-btn.correct {
            background-color: var(--accent-color) !important;
            color: white !important;
            border-color: var(--accent-color) !important;
        }

        .option-btn.wrong {
            background-color: var(--error-color) !important; /* اللون الأصفر */
            color: black !important;
            border-color: #f39c12 !important;
        }

        .feedback-area {
            display: none;
            margin-top: 25px;
            padding: 20px;
            background-color: #fcfbfb;
            border-right: 5px solid var(--accent-color);
            border-radius: 5px;
            animation: fadeIn 0.4s;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            background-color: var(--primary-color);
            color: white;
            transition: background 0.2s;
        }

        .btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        .btn:hover:not([disabled]) {
            background-color: #34495e;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            .container { padding: 15px; }
            .question-text { font-size: 1.1rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>اختبار: مبادئ وأصول علوم القرآن</h1>
    </header>

    <div class="stats-bar">
        <span id="question-counter">السؤال: 1 / 100</span>
        <span id="score-display">النتيجة: 0</span>
    </div>

    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="question-box" id="quiz-area">
        <!-- سيتم إدراج الأسئلة هنا بواسطة JavaScript -->
    </div>

    <div class="feedback-area" id="feedback">
        <div class="feedback-title" id="feedback-status"></div>
        <div id="feedback-text"></div>
    </div>

    <div class="nav-buttons">
        <button class="btn" id="prev-btn" onclick="prevQuestion()" disabled>السابق</button>
        <button class="btn" id="next-btn" onclick="nextQuestion()">التالي</button>
    </div>
</div>

<script>
    // قاعدة بيانات الأسئلة - 100 سؤال مستخرجة من المصادر
    const questions = [
        // --- القسم الأول: اختيار من متعدد (50 سؤال) ---
        // الأهمية والمنهجية
        {
            t: "mcq",
            q: "ما هو المنهج الصحيح في دراسة الأديان المقارنة في المرحلة التمهيدية لعلوم القرآن؟",
            o: ["تعلم الإسلام من خلال النصرانية", "تعلم النصرانية من خلال الإسلام (الأصل القرآني)", "دراسة كتب المستشرقين أولاً", "البدء بدراسة التوراة المترجمة"],
            a: 1,
            exp: "ورد في المصدر: منهجنا... هو تعلم النصرانية من خلال الإسلام، وليس تعلم الإسلام من خلال النصرانية؛ فأنت تتعلم الأصل القرآني."
        },
        {
            t: "mcq",
            q: "ما حكم الحديث في كتاب الله بغير علم ولو خلصت النوايا؟",
            o: ["جائز للمجتهد", "مكروه", "ذنب عظيم", "مستحب"],
            a: 2,
            exp: "النص: الحديث في كتاب اللهِ بغيْرِ علْمٍ ذنْبُ عظيم، حتى لو خلُصت النوايا."
        },
        {
            t: "mcq",
            q: "قال ﷺ: (من قال في القرآن برأيه فأصاب...):",
            o: ["فقد أصاب", "فله أجران", "فقد أخطأ", "فلا بأس عليه"],
            a: 2,
            exp: "تكملة الحديث: (فقد أخطأ)، لأنه لم يوفق إليه بعلم واتباع."
        },
        {
            t: "mcq",
            q: "لماذا لم تحفظ الأمم السابقة كتبها كما حفظ المسلمون القرآن؟",
            o: ["لأنهم اعتمدوا على الأوراق وحدها", "لأنهم اعتمدوا على الحفظ الصدري فقط", "لأن كتبهم كانت صعبة", "لأنهم فقدوا الورق"],
            a: 0,
            exp: "النص: حين اعتمدوا على الأوراق وحدها ضيعوا كتبهم وأديانهم، بل وضيعوا لغات أنبيائهم."
        },
        // تعريفات وأنواع العلوم
        {
            t: "mcq",
            q: "لماذا سُمي هذا الفن بـ (علوم القرآن) بصيغة الجمع؟",
            o: ["لأنه علم واحد متشعب", "لأن الأمة أخرجت لكل شيء في القرآن علماً", "لأن القرآن نزل في علوم شتى", "خطأ لغوي شائع"],
            a: 1,
            exp: "النص: أخرجت الأمةُ لكلِّ شيء في القرآنِ علمًا، فصارت عندنا علوم -جمع علم-."
        },
        {
            t: "mcq",
            q: "من أمثلة العلوم (المأخوذة) من القرآن الكريم:",
            o: ["علم التفسير", "علم القراءات", "علم العقيدة والفقه", "علم الرسم العثماني"],
            a: 2,
            exp: "النص: العلم الذي يؤخذ من القرآن الكريم، فإن من أمثلته: علم العقيدة وعلم الفقه وعلم الأخلاق."
        },
        {
            t: "mcq",
            q: "من أمثلة العلوم (الخادمة) للقرآن الكريم:",
            o: ["علم الأخلاق", "علم الفقه", "علم التفسير وأسباب النزول", "علم المواريث"],
            a: 2,
            exp: "النص: العلم الذي يخدم القرآن الكريم... مثل: علم التفسير، وعلم القراءات، وعلم أسباب النزول."
        },
        // تاريخ التدوين والتفسير
        {
            t: "mcq",
            q: "أقدم تفسيرات القرآن الكريم دونها وكتبها:",
            o: ["المستشرقون", "التابعون في زمن الصحابة", "علماء القرن الرابع", "الفلاسفة"],
            a: 1,
            exp: "النص: أقدم تفسيرات القرآن الكريم، كتبها التابعون ودونوها في زمان الصحابة."
        },
        {
            t: "mcq",
            q: "أول مفسر معروف للأناجيل هو (هيراكليون)، وكان:",
            o: ["قديساً", "حواريّاً", "هرطوقياً كافراً وغنوصياً", "مؤرخاً محايداً"],
            a: 2,
            exp: "النص: أقدم تفسير معروف على الكتب المسيحية... ظهرت على يد هرطوقي (كافر)، غنوصي يُدعى هيراكليون."
        },
        {
            t: "mcq",
            q: "التابعي الذي كتب تفسير شيخه ابن عباس هو:",
            o: ["مجاهد بن جبر", "قتادة", "الحسن البصري", "سعيد بن جبير"],
            a: 0,
            exp: "النص: تفسير التابعي مجاهد بن جبر الذي كتب فيه تفسير شيخه الصحابي عبد الله بن عباس."
        },
        {
            t: "mcq",
            q: "من التفاسير الشاملة الكاملة والمطبوعة من عهد التابعين:",
            o: ["تفسير الضحاك", "تفسير مقاتل بن سليمان", "تفسير الطبري", "تفسير ابن كثير"],
            a: 1,
            exp: "النص: ومن التفاسير الشاملة التي وصلتنا تفسير التابعي مقاتل بن سليمان (ت 150هـ) وهو كامل ومطبوع."
        },
        // العقيدة في القرآن
        {
            t: "mcq",
            q: "ما هي عقيدة أهل السنة في القرآن الكريم؟",
            o: ["مخلوق", "كلام الله غير مخلوق، منه بدأ وإليه يعود", "حكاية عن كلام الله", "قديم أزلي لا يتعلق بالمشيئة"],
            a: 1,
            exp: "النص: القرآن كلام الله منه بدأ وإليه يعود... ليس بمخلوق."
        },
        {
            t: "mcq",
            q: "استدل الجهمية على خلق القرآن بحديث (تجيء البقرة وآل عمران)، والرد عليهم:",
            o: ["الحديث ضعيف", "المقصود مجيء ثوابهما", "الحديث خاص بالقيامة", "الله يخلق الكلام"],
            a: 1,
            exp: "النص: المراد منها ثوابُ أعمال الفرد... أطلق اسم الشيء على سببه."
        },
        {
            t: "mcq",
            q: "ما حكم قول (يا رب القرآن)؟",
            o: ["جائز مطلقاً", "شرك", "لا يجوز إلا إذا قُصد (يا صاحب القرآن)", "مكروه"],
            a: 2,
            exp: "النص: لا يصح... إلاّ إذا قصد القائل بقوله معنى (يا صاحب القرآن) كما يقال يا صاحب العزة."
        },
        {
            t: "mcq",
            q: "صفة الكلام لله تعالى تعتبر صفة:",
            o: ["ذاتية فقط", "فعلية فقط", "ذاتية وفعلية معاً", "مخلوقة"],
            a: 2,
            exp: "النص: صفة كلام الله ذاتية وفعلية... جنس الكلام قديم ذاتي، لكن كلامه المعين معلق بمشيئته."
        },
        // الأسماء والأوصاف
        {
            t: "mcq",
            q: "الاسمان الأشهر للقرآن الكريم هما:",
            o: ["القرآن والفرقان", "الكتاب والذكر", "التنزيل والنور", "المصحف والهدى"],
            a: 0,
            exp: "النص: هذين الاسمين (القرآن والفرقان) هما أشهر أسماء النظم الكريم."
        },
        {
            t: "mcq",
            q: "اعتبار (كريم) و (مبارك) من أسماء القرآن هو:",
            o: ["صحيح", "إسراف، والصواب أنهما وصفان", "رأي الجمهور", "واجب"],
            a: 1,
            exp: "النص: قد يسرف البعض... أما لفظ كريم ومبارك فلا شك أنهما وصفان."
        },
        {
            t: "mcq",
            q: "نطق لفظ (القرآن) له وجهان ثابتان:",
            o: ["مهموز فقط", "غير مهموز فقط", "مهموز (القرآن) وغير مهموز (القران)", "بالمد الطويل"],
            a: 2,
            exp: "النص: يُنطق مهموز... وفيه قراءتان ثابتتان... غير مهموز (القران) أو مهموزاً."
        },
        // النزول
        {
            t: "mcq",
            q: "أين كان القرآن قبل نزوله إلى السماء الدنيا؟",
            o: ["في صحف مطهرة", "في اللوح المحفوظ", "في غار حراء", "في قلب جبريل"],
            a: 1,
            exp: "النص: كان القرآن أولًا في اللوح المحفوظ."
        },
        {
            t: "mcq",
            q: "النزول الأول (الجملي) كان من اللوح المحفوظ إلى:",
            o: ["الأرض", "بيت العزة في السماء الدنيا", "البيت المعمور", "مكة"],
            a: 1,
            exp: "النص: نزول القرآن أولًا من اللوح المحفوظ إلى بيت العزة في السماء الدنيا."
        },
        {
            t: "mcq",
            q: "مدة النزول الثاني (المفرق/المنجم) كانت:",
            o: ["10 سنوات", "20 سنة", "23 سنة تقريباً", "40 سنة"],
            a: 2,
            exp: "النص: على مدار ثلاثة وعشرين سنة."
        },
        {
            t: "mcq",
            q: "الحكمة من النزول الأول (الجملي) هي:",
            o: ["التكليف", "تعظيم شأن النبي والكتاب والأمة عند الملائكة", "التدرج", "الحفظ"],
            a: 1,
            exp: "النص: الحكمة... تعظيم شأن الرسول عند الملائكة، وتعظيم شأن هذا الكتاب..."
        },
        {
            t: "mcq",
            q: "الأثر المروي عن ابن عباس في النزول الجملي حكمه:",
            o: ["ضعيف", "موقوف له حكم الرفع", "رأي شخصي", "إسرائيليات"],
            a: 1,
            exp: "النص: له حكم الرفع إلى النبي ﷺ... لأن قول الصحابي فيما لا مجال للرأي فيه له حكم المرفوع."
        },
        // الحكمة من التنجيم
        {
            t: "mcq",
            q: "من حكم نزول القرآن مفرقاً (التنجيم):",
            o: ["تعظيم الملائكة", "تثبيت فؤاد النبي وتيسير الحفظ والتدرج", "نسخ الكتب السابقة", "إخفاء القرآن"],
            a: 1,
            exp: "النص ذكر: تثبيت قلب النبي، تيسير الحفظ، التدرج في التشريع، مسايرة الحوادث."
        },
        {
            t: "mcq",
            q: "مثال على التدرج في التشريع كما ورد في النص:",
            o: ["الصلاة", "الزكاة", "تحريم الخمر", "الحج"],
            a: 2,
            exp: "النص ذكر مثال التدرج في تحريم الخمر تفصيلاً."
        },
        {
            t: "mcq",
            q: "قوله تعالى (ورَتَّلْنَاهُ تَرْتِيلًا) في سياق الرد على الكفار يعني:",
            o: ["قراءته بالتجويد", "نزلناه مفرقاً شيئاً فشيئاً", "كتبناه بوضوح", "حفظناه"],
            a: 1,
            exp: "النص: ورتلناه ترتيلاً... أي نزلناه شيئاً فشيئاً (مفرقاً) لتثبيت الفؤاد."
        },
        // الردود والشبهات
        {
            t: "mcq",
            q: "كيف تلقى جبريل عليه السلام القرآن في النزول الثاني؟",
            o: ["أخذه من اللوح المحفوظ", "سمعه من الله تعالى", "أخذه من الملائكة", "أخذه من ميكائيل"],
            a: 1,
            exp: "النص: سمعه جبريل عليه السلام من الله فينزل به على قلب النبي."
        },
        {
            t: "mcq",
            q: "رد ابن تيمية على من قال إن جبريل أخذ القرآن من اللوح المحفوظ بأن ذلك يقتضي:",
            o: ["أن تكون منزلة بني إسرائيل أرفع من منزلة محمد ﷺ", "أن جبريل أمين", "أن القرآن قديم", "أن الوحي منقطع"],
            a: 0,
            exp: "النص: لو كان جبريل أخذ القرآن من اللوح... لكان بنو إسرائيل أكرم... لأن الله كتب لموسى التوراة بيده."
        },
        {
            t: "mcq",
            q: "قوله تعالى (إِنَّهُ لَقَوْلُ رَسُولٍ كَرِيمٍ) إضافة القول للرسول هي إضافة:",
            o: ["إحداث وإنشاء", "تبليغ وأداء", "تأليف", "مجاز"],
            a: 1,
            exp: "النص: إضافة تبليغ لا إضافة إحداث."
        },
        {
            t: "mcq",
            q: "الحديث (تجيء البقرة وآل عمران كأنهما غمامتان) يدل على:",
            o: ["خلق القرآن", "مجيء ثوابهما", "مجيء السور بذاتها", "تجسد الكلام"],
            a: 1,
            exp: "النص: أي أن ثوابهما يأتي قارئهما."
        },
        // مقارنة الأديان
        {
            t: "mcq",
            q: "أول تأليه رسمي للمسيح كان في مجمع:",
            o: ["نيقية 325م", "القسطنطينية 381م", "خلقيدونية", "أفسس"],
            a: 0,
            exp: "النص: أول تأليه رسمي له تم في مجمع نيقية سنة 325م."
        },
        {
            t: "mcq",
            q: "أول إقرار بعقيدة الثالوث كان في مجمع:",
            o: ["نيقية", "القسطنطينية 381م", "روما", "أورشليم"],
            a: 1,
            exp: "النص: أول إقرار به (الثالوث) كان في مجمع القسطنطينية 381م."
        },
        {
            t: "mcq",
            q: "النص (1 يوحنا 5: 7) المتعلق بالثالوث هو:",
            o: ["نص أصلي", "نص مضاف (محرف) منذ 400 عام فقط", "كلام المسيح", "من العهد القديم"],
            a: 1,
            exp: "النص: حرفوا وأضافوا نصا للثالوث منذ 400 عام فقط... وهو (1 يوحنا 5: 7)."
        },
        {
            t: "mcq",
            q: "الهرطقة في العرف المسيحي تعني:",
            o: ["الإيمان القويم", "الزندقة والاختيار المغاير للعقيدة", "التفسير الصحيح", "الرهبانية"],
            a: 1,
            exp: "النص: الهرطقة في العرف المسيحي هي الزندقة... أصلها يعني يختار."
        },
        {
            t: "mcq",
            q: "الغنوصية (Gnosticism) تعتمد في الخلاص على:",
            o: ["الإيمان", "المعرفة (العرفان)", "الأعمال الصالحة", "الصلاة"],
            a: 1,
            exp: "النص: يمكن تحرير... الشعلة عن طريق معرفتها، أي (أغنصتها)."
        },
        // تفاصيل الكتب
        {
            t: "mcq",
            q: "من الكتب المؤلفة في (الوجوه والنظائر):",
            o: ["كتاب مقاتل بن سليمان", "كتاب سيبويه", "صحيح البخاري", "موطأ مالك"],
            a: 0,
            exp: "النص: ومن الكتب المطبوعة فيها كتاب مقاتل بن سليمان."
        },
        {
            t: "mcq",
            q: "مؤلف كتاب (فضائل القرآن) هو:",
            o: ["أبو عبيد القاسم بن سلام", "الطبري", "القرطبي", "مجاهد"],
            a: 0,
            exp: "النص: ومن كتب علوم القرآن المفردة، كتاب (فضائل القرآن) لأبي عبيد القاسم بن سلام."
        },
        {
            t: "mcq",
            q: "كتاب (تأويل مشكل القرآن) مؤلفه:",
            o: ["ابن قتيبة الدينوري", "الزركشي", "السيوطي", "الطحاوي"],
            a: 0,
            exp: "النص: وكتاب (تأويل مشكل القرآن) لابن قتيبة الدينوري."
        },
        {
            t: "mcq",
            q: "النزول إلى السماء الدنيا وصف بأنه:",
            o: ["تكليفي", "تشريفي", "تجريبي", "منسوخ"],
            a: 1,
            exp: "النص: وأن النزول إلى السماء الدنيا نزول تشريفي لا تكليفي."
        },
        {
            t: "mcq",
            q: "في الإجازة القرآنية، الصحيح أن يقال في السند:",
            o: ["عن جبريل عن اللوح المحفوظ", "عن جبريل عن الله (بلا واسطة)", "عن جبريل عن ميكائيل", "عن الملائكة الكاتبين"],
            a: 1,
            exp: "النص: بل هو عن رسول الله عن جبريل -بلا واسطة- عن الله."
        },
        {
            t: "mcq",
            q: "هل توجد اليوم لغة المسيح أو موسى عليهما السلام الأصلية؟",
            o: ["نعم، محفوظة", "لا، ضاعت وكل الموجود لغات متأخرة", "نعم في الفاتيكان", "نعم عند اليهود"],
            a: 1,
            exp: "النص: لا يوجد في الدنيا اليوم لا لغة المسيح ولا لغة موسى... كلها لغات مزورة متأخرة."
        },
        {
            t: "mcq",
            q: "القرآن جمع بين النزولين (الجملي والمفرق)، بينما الكتب السابقة:",
            o: ["جمعت بينهما أيضاً", "نزلت مفرقة فقط", "نزلت جملة واحدة فقط (غالباً)", "لم تنزل أصلاً"],
            a: 2,
            exp: "النص: بينما لم يجتمع للكتب السابقة إلا أحد النزولين إما جملة أو مفرق."
        },
        {
            t: "mcq",
            q: "التحدي بالقرآن مفرقاً (منجماً) يعتبر:",
            o: ["أضعف", "أقوى في الإعجاز", "مساوي", "غير ممكن"],
            a: 1,
            exp: "النص: التحدي به مُفرَّقًا أقوى في الِإعجاز."
        },
        {
            t: "mcq",
            q: "الآية (وأنزلنا الحديد) تدل على:",
            o: ["نزول الوحي", "الإنزال المطلق (الخلق)", "أن الحديد قديم", "أن الحديد كلام الله"],
            a: 1,
            exp: "النص: وأخبر بتنزيل مطلق في مثل قوله (وأنزلنا الحديد)... لأن الحديد ينزل من رؤوس الجبال."
        },
        {
            t: "mcq",
            q: "أول ما نزل من القرآن (موضوعاً):",
            o: ["الحلال والحرام", "أصول الإيمان والجنة والنار", "تحريم الخمر", "أحكام الميراث"],
            a: 1,
            exp: "النص: فأول ما نزل: أصول الإِيمان بالله... ثم نزل الأمر بمحاسن الأخلاق."
        },
        {
            t: "mcq",
            q: "قال عمر بن الخطاب: (تعلموا القرآن خمس آيات خمس آيات) وهذا يدل على:",
            o: ["قلة الحفظ", "تيسير الحفظ والفهم", "عدم وجود ورق", "أمر النبي بذلك"],
            a: 1,
            exp: "النص: تيسيرًا للحفظ، وتيسيرًا للفهم والعمل به."
        },
        {
            t: "mcq",
            q: "الفرقة التي نفت الصفات وقالت بخلق القرآن هم:",
            o: ["أهل السنة", "الجهمية", "الصحابة", "التابعين"],
            a: 1,
            exp: "النص: سبب قول من قال عن القرآن أنه مخلوق كالجهمية فهو نفيهم كل الصفات."
        },
        {
            t: "mcq",
            q: "معنى (القرآن) لغةً يدل على:",
            o: ["الكتابة", "القراءة (يُقرأ)", "الجمع", "التفرق"],
            a: 1,
            exp: "النص: معنى القرآن لغةً دالةً على تلقيهِ اقراءً (مقروءً)... معناه: القراءة."
        },
        {
            t: "mcq",
            q: "تعريف نور الدين عتر لعلوم القرآن: (المباحث الكلية التي تتعلق بالقرآن من ناحية...):",
            o: ["فقهه فقط", "نزوله وجمعه وكتابته وتفسيره...", "لغته فقط", "تاريخه فقط"],
            a: 1,
            exp: "النص: عرفه العلامة... بأنه: المباحث الكلية التي تتعلق بالقرآن الكريم من ناحية نزوله، وترتيبه..."
        },
        {
            t: "mcq",
            q: "الأصل في تسمية (علوم القرآن) أن الأمة:",
            o: ["قصرت في خدمته", "أخرجت لكل شيء فيه علماً", "نقلت علوم غيرها", "اكتفت بالتفسير"],
            a: 1,
            exp: "النص: أخرجت الأمةُ لكلِّ شيء في القرآنِ علمًا."
        },

        // --- القسم الثاني: صح أم خطأ (50 سؤال) ---
        { t: "tf", q: "يجوز تعلم الإسلام من خلال كتب النصرانية في منهج الأديان المقارنة.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. المنهج هو تعلم النصرانية من خلال الإسلام (الأصل القرآني). (المصدر 2)" },
        { t: "tf", q: "الحديث في كتاب الله بغير علم ذنب عظيم.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 4)" },
        { t: "tf", q: "من قال في القرآن برأيه فأصاب فقد أجر.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. فقد أخطأ. (المصدر 5)" },
        { t: "tf", q: "القرآن الكريم يوافق صريح العقل والعلم.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 6)" },
        { t: "tf", q: "معرفة قاعدة واحدة في علوم القرآن قد تنسف عدة شبهات مجتمعة.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 7)" },
        { t: "tf", q: "يصح إضافة لفظة (الذات) إلى الله عز وجل (ذات الله).", o: ["صح", "خطأ"], a: 0, exp: "صح. ورد في السنة (كذبات في ذات الله). (المصدر 10)" },
        { t: "tf", q: "علم العقيدة والفقه من العلوم (الخادمة) للقرآن.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. هي من العلوم (المأخوذة) من القرآن. (المصدر 11)" },
        { t: "tf", q: "علم التفسير والقراءات من العلوم (المأخوذة) من القرآن.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. هي من العلوم (الخادمة) للقرآن. (المصدر 13)" },
        { t: "tf", q: "النصارى أخذوا عقيدتهم من الإنجيل كما أخذ المسلمون عقيدتهم من القرآن.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. أخذوها من المجامع الوثنية. (المصدر 12)" },
        { t: "tf", q: "تفسير مقاتل بن سليمان (ت 150 هـ) مفقود.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. هو كامل ومطبوع. (المصدر 16)" },
        { t: "tf", q: "أوريجانوس استشهد بتفسير الهرطوقي هيراكليون.", o: ["صح", "خطأ"], a: 0, exp: "صح. استشهد به أكثر من 40 مرة. (المصدر 21)" },
        { t: "tf", q: "يصح تلقي القرآن من المصحف مباشرة دون مشافهة.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. القراءة من المصحف غير صحيح، لا بد من التلقي (معنى القرآن القراءة). (المصدر 24)" },
        { t: "tf", q: "كلمة (كريم) في قوله (إنه لقرآن كريم) تعتبر اسماً للقرآن.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. هي وصف. (المصدر 27)" },
        { t: "tf", q: "لفظ (القرآن) مشترك لفظي يطلق على الكل وعلى الجزء (الآية).", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 27)" },
        { t: "tf", q: "الجهمية فرقة كافرة عند العلماء.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 28)" },
        { t: "tf", q: "حديث (القرآن شافع مشفع) يدل على أن القرآن مخلوق.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. يدل على ثواب العمل. (المصدر 32)" },
        { t: "tf", q: "الإمام أحمد فسر (تجيء البقرة) بمجيء ثوابها.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 35)" },
        { t: "tf", q: "لا يصح القول بأن القرآن (قديم) بإطلاق، بل هو كلام الله.", o: ["صح", "خطأ"], a: 0, exp: "صح. لم يثبت عن السلف لفظ (قديم). (المصدر 37)" },
        { t: "tf", q: "جنس كلام الله قديم، وكلامه المعين معلق بالمشيئة.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 37)" },
        { t: "tf", q: "المحفوظ عن السلف الخوض العميق في كيفية كلام الله.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. المحفوظ السكوت عما وراء القول بأنه كلام الله غير مخلوق. (المصدر 39)" },
        { t: "tf", q: "الأحكام في اللوح المحفوظ ثابتة لا تقبل النسخ.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. تجري الأحكام فيه من نسخ وثبوت (يمحو الله ما يشاء). (المصدر 42)" },
        { t: "tf", q: "النزول الأول للقرآن كان مفرقاً على 20 سنة.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. كان جملة واحدة. (المصدر 44)" },
        { t: "tf", q: "نزل القرآن جملة واحدة إلى بيت العزة في السماء الدنيا.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 46)" },
        { t: "tf", q: "أثر ابن عباس في النزول الجملي حكمه الرفع.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 45)" },
        { t: "tf", q: "الشياطين تستطيع استراق السمع للوحي.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. السماء ملئت حرساً شديداً وشهباً. (المصدر 50)" },
        { t: "tf", q: "النزول المفرق (الثاني) هو النزول التكليفي.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 50)" },
        { t: "tf", q: "تحريم الخمر نزل دفعة واحدة.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. نزل بالتدرج. (المصدر 52)" },
        { t: "tf", q: "لو نزل تحريم الخمر أولاً لقال الناس: لا ندع الخمر أبداً.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 52)" },
        { t: "tf", q: "المشركون كانوا راضين عن نزول القرآن مفرقاً.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. اعترضوا (لولا نزل عليه جملة واحدة). (المصدر 51)" },
        { t: "tf", q: "النزولان (الجملي والمفرق) متصلان (الله -> اللوح -> جبريل).", o: ["صح", "خطأ"], a: 1, exp: "خطأ. منفصلان. (المصدر 56)" },
        { t: "tf", q: "جبريل عليه السلام سمع القرآن من الله مباشرة.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 56)" },
        { t: "tf", q: "إذا تكلم الله بالوحي صعقت الملائكة.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 56)" },
        { t: "tf", q: "أول من يرفع رأسه بعد الصعقة هو ميكائيل.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. هو جبريل عليه السلام. (المصدر 56)" },
        { t: "tf", q: "لو أخذ جبريل القرآن من اللوح لكان بنو إسرائيل أكرم من أمة محمد.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 58)" },
        { t: "tf", q: "إضافة القول للرسول (لقول رسول كريم) تعني أنه هو من أنشأ الكلام.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. إضافة تبليغ. (المصدر 59)" },
        { t: "tf", q: "في سورة التكوير (رسول كريم) هو محمد ﷺ.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. هو جبريل (ذي قوة عند ذي العرش). (المصدر 59)" },
        { t: "tf", q: "يجوز في الإجازة القول (عن جبريل عن اللوح المحفوظ).", o: ["صح", "خطأ"], a: 1, exp: "خطأ. عن جبريل عن الله. (المصدر 60)" },
        { t: "tf", q: "يصح وصف الله بـ (المتكلم) إذا شاء.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 37)" },
        { t: "tf", q: "الهرطقة تعني في الأصل اليوناني (الاختيار).", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 19)" },
        { t: "tf", q: "الغنوصية ترى أن الكون المادي هو انبثاق للرب الأعلى.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 20)" },
        { t: "tf", q: "كتاب (المكي والمدني) للزهري من الكتب المفقودة.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. ذكر المصدر أنه مطبوع. (المصدر 17)" },
        { t: "tf", q: "بدأ حفظ القرآن في اللوح المحفوظ قبل نزوله.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 42)" },
        { t: "tf", q: "القرآن له وجودان في السماوات: في اللوح وفي بيت العزة.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 48)" },
        { t: "tf", q: "النزول إلى السماء الدنيا كان في ليلة النصف من شعبان.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. في ليلة القدر. (المصدر 46)" },
        { t: "tf", q: "التحدي بالقرآن مفرقاً أصعب وأبلغ من التحدي به جملة.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 54)" },
        { t: "tf", q: "الله أنزل الحديد من السماء كما أنزل القرآن.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. فرق ابن تيمية بين (أنزل منه) و (أنزل) مطلقاً كالحديد. (المصدر 58)" },
        { t: "tf", q: "يجوز الخوض في كيفية كلام الله.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. بلا كيفية. (المصدر 28)" },
        { t: "tf", q: "القرآن المعجز هو المنزل على محمد ﷺ للإعجاز بسورة منه.", o: ["صح", "خطأ"], a: 0, exp: "صح. (المصدر 24)" },
        { t: "tf", q: "نطق (القرآن) بدون همزة جائز.", o: ["صح", "خطأ"], a: 0, exp: "صح. قراءة ابن كثير. (المصدر 25)" },
        { t: "tf", q: "الأمم السابقة لها علوم تسمى (علوم الإنجيل) و (علوم التوراة) محفوظة.", o: ["صح", "خطأ"], a: 1, exp: "خطأ. لا تجد ذلك، ضيعوها. (المصدر 9)" }
    ];

    let currentQuestion = 0;
    let score = 0;
    let answered = false;

    // عناصر الصفحة
    const quizArea = document.getElementById('quiz-area');
    const feedbackArea = document.getElementById('feedback');
    const feedbackStatus = document.getElementById('feedback-status');
    const feedbackText = document.getElementById('feedback-text');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const qCounter = document.getElementById('question-counter');
    const scoreDisplay = document.getElementById('score-display');
    const progressBar = document.getElementById('progress-bar');

    function loadQuestion() {
        answered = false;
        feedbackArea.style.display = 'none';
        nextBtn.disabled = true;
        prevBtn.disabled = currentQuestion === 0;

        // تحديث العداد
        qCounter.textContent = `السؤال: ${currentQuestion + 1} / ${questions.length}`;
        const progress = ((currentQuestion) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;

        // التعامل مع الزر الأخير
        if (currentQuestion === questions.length - 1) {
            nextBtn.textContent = "إنهاء الاختبار";
        } else {
            nextBtn.textContent = "التالي";
        }

        const q = questions[currentQuestion];
        
        let html = `<div class="question-text">${q.q}</div><div class="options-grid">`;
        
        q.o.forEach((opt, index) => {
            html += `<button class="option-btn" onclick="checkAnswer(${index}, this)">${opt}</button>`;
        });
        
        html += `</div>`;
        quizArea.innerHTML = html;
    }

    function checkAnswer(selectedIndex, btnElement) {
        if (answered) return;
        answered = true;
        nextBtn.disabled = false;

        const q = questions[currentQuestion];
        const buttons = document.querySelectorAll('.option-btn');

        if (selectedIndex === q.a) {
            // إجابة صحيحة
            btnElement.classList.add('correct');
            score++;
            scoreDisplay.textContent = `النتيجة: ${score}`;
            showFeedback(true, q.exp);
        } else {
            // إجابة خاطئة
            btnElement.classList.add('wrong'); // تلوين بالأصفر
            buttons[q.a].classList.add('correct'); // تلوين الصحيح بالأخضر
            showFeedback(false, q.exp);
        }
    }

    function showFeedback(isCorrect, explanation) {
        feedbackArea.style.display = 'block';
        if (isCorrect) {
            feedbackStatus.textContent = "✅ إجابة صحيحة!";
            feedbackStatus.style.color = "var(--accent-color)";
        } else {
            feedbackStatus.textContent = "⚠️ إجابة خاطئة";
            feedbackStatus.style.color = "#d35400";
        }
        feedbackText.textContent = `التوضيح: ${explanation}`;
    }

    function nextQuestion() {
        if (currentQuestion < questions.length - 1) {
            currentQuestion++;
            loadQuestion();
        } else {
            finishQuiz();
        }
    }

    function prevQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            loadQuestion();
            // ملاحظة: عند الرجوع، يتم إعادة تعيين السؤال للإجابة مرة أخرى في هذا التصميم البسيط
            // للحفاظ على النتيجة بدقة عند الرجوع يتطلب منطقاً أعقد، هنا نكتفي بإعادة العرض
        }
    }

    function finishQuiz() {
        progressBar.style.width = '100%';
        let msg = "";
        if (score >= 90) msg = "ممتاز! استيعاب كامل للمادة.";
        else if (score >= 75) msg = "جيد جداً.";
        else msg = "حاول مرة أخرى لمراجعة المعلومات.";

        quizArea.innerHTML = `
            <div style="text-align: center; padding: 40px;">
                <h2 style="color: var(--primary-color);">انتهى الاختبار</h2>
                <p style="font-size: 1.5rem; margin: 20px 0;">نتيجتك النهائية: ${score} من ${questions.length}</p>
                <p>${msg}</p>
                <button class="btn" onclick="location.reload()">إعادة الاختبار</button>
            </div>
        `;
        feedbackArea.style.display = 'none';
        document.querySelector('.nav-buttons').style.display = 'none';
    }

    // بدء التطبيق
    loadQuestion();
</script>

</body>
</html>